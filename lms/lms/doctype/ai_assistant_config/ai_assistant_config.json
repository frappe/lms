{
 "doctype": "DocType",
 "name": "AI Assistant Config",
 "module": "LMS",
 "custom": 0,
 "istable": 0,
 "editable_grid": 0,
 "track_changes": 1,
 "allow_rename": 0,
 "autoname": "field:course",
  "field_order": [
   "course",
   "enabled",
   "paused_by_alert",
   "auto_pause_on_alert",
   "enable_overrides",
   "mode",
   "system_prompt",
   "prompt_preset",
   "preset_description",
   "default_model",
   "enable_rag",
   "section_break_proxy",
   "proxy_base_url",
   "proxy_api_key",
   "max_messages_per_user_per_day",
   "cost_per_message",
   "cost_cap_per_user"
  ],
  "fields": [
  {"default": "1", "fieldname": "enabled", "fieldtype": "Check", "label": "Enable Assistant for this Course"},
  {"default": "0", "fieldname": "paused_by_alert", "fieldtype": "Check", "label": "Paused by Alert", "read_only": 1, "depends_on": "eval:doc.enabled"},
  {"default": "1", "fieldname": "auto_pause_on_alert", "fieldtype": "Check", "label": "Auto-Pause on Alert"},
  {"fieldname": "course", "fieldtype": "Link", "label": "Course", "options": "LMS Course", "in_list_view": 1, "unique": 1, "reqd": 1},
  {"default": "0", "fieldname": "enable_overrides", "fieldtype": "Check", "label": "Enable Overrides"},
  {"fieldname": "mode", "fieldtype": "Select", "label": "Assistant Mode", "options": "(inherit)\nHeuristic\nProxy", "default": "(inherit)"},
  {"fieldname": "system_prompt", "fieldtype": "Small Text", "label": "System Prompt"},
  {"fieldname": "prompt_preset", "fieldtype": "Link", "label": "Prompt Preset", "options": "AI Prompt Preset"},
  {"fieldname": "preset_description", "fieldtype": "Small Text", "label": "Preset Description", "read_only": 1, "depends_on": "eval:doc.prompt_preset"},
  {"fieldname": "default_model", "fieldtype": "Data", "label": "Default Model", "description": "Model name in the format expected by your external service provider (e.g. 'openai/gpt-4o-mini' for OpenRouter, 'gpt-4o-mini' for OpenAI)"},
  {"default": "0", "fieldname": "enable_rag", "fieldtype": "Check", "label": "Enable RAG"},
  {"fieldname": "section_break_proxy", "fieldtype": "Section Break", "label": "Proxy (optional)"},
  {"fieldname": "proxy_base_url", "fieldtype": "Data", "label": "Proxy Base URL"},
  {"fieldname": "proxy_api_key", "fieldtype": "Password", "label": "Proxy API Key"},
  {"default": "0", "fieldname": "max_messages_per_user_per_day", "fieldtype": "Int", "label": "Max Messages/User/Day"},
  {"default": "0", "fieldname": "cost_per_message", "fieldtype": "Currency", "label": "Cost per Assistant Message"},
  {"fieldname": "cost_cap_per_user", "fieldtype": "Currency", "label": "Cost Cap/User (Placeholder)"}
 ],
 "permissions": [
  {"role": "System Manager", "read": 1, "write": 1, "create": 1, "delete": 1, "share": 1, "print": 1, "email": 1},
  {"role": "Moderator", "read": 1, "write": 1, "create": 1},
  {"role": "Course Creator", "read": 1, "write": 1, "create": 1}
 ]
}
