import{r as ref,A as createResource,e as createElementBlock,f as openBlock,g as createBaseVNode,t as toDisplayString,l as unref,h as createVNode,bj as CircleAlert,bk as withModifiers,q as _sfc_main$1,aI as convertToTitleCase,H as toast}from"./index-D24HXhLT.js";const _hoisted_1={class:"mt-7"},_hoisted_2={class:"mb-3 text-lg font-semibold text-ink-gray-9"},_hoisted_3={key:0,class:"flex items-center space-x-2 text-sm text-ink-gray-7 bg-surface-gray-1 px-3 py-2 rounded-md w-full text-center"},_hoisted_4={key:1,class:"flex flex-col md:flex-row gap-4 md:gap-0 justify-between w-3/4 mt-5"},_sfc_main={__name:"ProfileRoles",props:{profile:{type:Object,required:!0}},setup(__props){const moderator=ref(!1),course_creator=ref(!1),batch_evaluator=ref(!1),lms_student=ref(!1),readOnlyMode=window.read_only_mode,props=__props;createResource({url:"lms.lms.utils.get_roles",makeParams(o){var e;return{name:(e=props.profile.data)==null?void 0:e.name}},auto:!0,onSuccess(data){let roles=["moderator","course_creator","batch_evaluator","lms_student"];for(let role of roles)data[role]&&(eval(role).value=!0)}});const updateRole=createResource({url:"lms.lms.api.save_role",makeParams(o){var e;return{user:(e=props.profile.data)==null?void 0:e.name,role:o.role,value:o.value}}}),changeRole=role=>{updateRole.submit({role:convertToTitleCase(role.split("_").join(" ")),value:eval(role).value},{onSuccess(o){toast.success(__("Role updated successfully"))}})};return(o,e)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("h2",_hoisted_2,toDisplayString(o.__("Settings")),1),unref(readOnlyMode)?(openBlock(),createElementBlock("div",_hoisted_3,[createVNode(unref(CircleAlert),{class:"size-4 stroke-1.5"}),createBaseVNode("span",null,toDisplayString(o.__("You cannot change the roles in read-only mode.")),1)])):(openBlock(),createElementBlock("div",_hoisted_4,[createVNode(unref(_sfc_main$1),{label:o.__("Moderator"),modelValue:moderator.value,"onUpdate:modelValue":e[0]||(e[0]=a=>moderator.value=a),type:"checkbox",onChange:e[1]||(e[1]=withModifiers(a=>changeRole("moderator"),["stop"]))},null,8,["label","modelValue"]),createVNode(unref(_sfc_main$1),{label:o.__("Course Creator"),modelValue:course_creator.value,"onUpdate:modelValue":e[2]||(e[2]=a=>course_creator.value=a),type:"checkbox",onChange:e[3]||(e[3]=withModifiers(a=>changeRole("course_creator"),["stop"]))},null,8,["label","modelValue"]),createVNode(unref(_sfc_main$1),{label:o.__("Evaluator"),modelValue:batch_evaluator.value,"onUpdate:modelValue":e[4]||(e[4]=a=>batch_evaluator.value=a),type:"checkbox",onChange:e[5]||(e[5]=withModifiers(a=>changeRole("batch_evaluator"),["stop"]))},null,8,["label","modelValue"]),createVNode(unref(_sfc_main$1),{label:o.__("Student"),modelValue:lms_student.value,"onUpdate:modelValue":e[6]||(e[6]=a=>lms_student.value=a),type:"checkbox",onChange:e[7]||(e[7]=withModifiers(a=>changeRole("lms_student"),["stop"]))},null,8,["label","modelValue"])]))]))}};export{_sfc_main as default};
//# sourceMappingURL=ProfileRoles-Dy_brvu3.js.map
