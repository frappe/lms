{"version":3,"file":"Jobs-CEi0TUu5.js","sources":["../../../../frontend/src/components/JobCard.vue","../../../../frontend/src/pages/Jobs.vue"],"sourcesContent":["<template>\n\t<div\n\t\tclass=\"flex flex-col border rounded-md p-3 h-full hover:border-outline-gray-4\"\n\t>\n\t\t<div class=\"flex space-x-4 mb-4\">\n\t\t\t<div class=\"flex flex-col space-y-2 flex-1\">\n\t\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9\">\n\t\t\t\t\t{{ job.company_name }}\n\t\t\t\t</div>\n\t\t\t\t<span class=\"font-medium text-ink-gray-7 leading-5\">\n\t\t\t\t\t{{ job.job_title }}\n\t\t\t\t</span>\n\t\t\t\t<div class=\"flex items-center space-x-1 text-sm text-ink-gray-7\">\n\t\t\t\t\t<MapPin class=\"size-3\" />\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ job.location }}{{ job.country ? `, ${job.country}` : '' }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"job.applicants\"\n\t\t\t\t\tclass=\"flex items-center space-x-1 text-sm text-ink-gray-7\"\n\t\t\t\t>\n\t\t\t\t\t<User class=\"size-3\" />\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ job.applicants }}\n\t\t\t\t\t\t{{ job.applicants > 1 ? __('applicants') : __('applicant') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- <img :src=\"job.company_logo\" alt=\"Company Logo\" class=\"size-8  rounded-full object-contain  bg-white\" /> -->\n\t\t</div>\n\t\t<div class=\"space-x-2 mt-auto\">\n\t\t\t<Badge>\n\t\t\t\t{{ job.type }}\n\t\t\t</Badge>\n\t\t\t<Badge>\n\t\t\t\t{{ dayjs(job.creation).fromNow() }}\n\t\t\t</Badge>\n\t\t</div>\n\t\t<!-- <div\n\t\t\tclass=\"description text-ink-gray-9 text-sm\"\n\t\t\tv-html=\"job.description\"\n\t\t></div> -->\n\t</div>\n</template>\n<script setup>\nimport { inject } from 'vue'\nimport { Badge } from 'frappe-ui'\nimport { MapPin, User } from 'lucide-vue-next'\n\nconst dayjs = inject('$dayjs')\nconst props = defineProps({\n\tjob: {\n\t\ttype: Object,\n\t\tdefault: null,\n\t},\n})\n</script>\n<style>\n.description {\n\tdisplay: -webkit-box;\n\t-webkit-line-clamp: 2;\n\t-webkit-box-orient: vertical;\n\ttext-overflow: ellipsis;\n\twidth: 100%;\n\toverflow: hidden;\n\tmargin-top: auto;\n\tline-height: 1.5;\n}\n</style>\n","<template>\n\t<div class=\"\">\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t\t>\n\t\t\t<Breadcrumbs\n\t\t\t\tclass=\"h-7\"\n\t\t\t\t:items=\"[{ label: __('Jobs'), route: { name: 'Jobs' } }]\"\n\t\t\t/>\n\t\t\t<router-link\n\t\t\t\tv-if=\"user.data?.name\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'JobForm',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tjobName: 'new',\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button v-if=\"!readOnlyMode\" variant=\"solid\">\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ __('New Job') }}\n\t\t\t\t</Button>\n\t\t\t</router-link>\n\t\t</header>\n\t\t<div>\n\t\t\t<div\n\t\t\t\tv-if=\"jobCount\"\n\t\t\t\tclass=\"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center justify-between w-full md:w-4/5 mx-auto p-5\"\n\t\t\t>\n\t\t\t\t<div class=\"text-xl font-semibold text-ink-gray-7 mb-4 md:mb-0\">\n\t\t\t\t\t{{ __('{0} Open Jobs').format(jobCount) }}\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"jobs.data?.length || jobCount > 0\"\n\t\t\t\t\tclass=\"grid grid-cols-1 md:grid-cols-3 gap-2\"\n\t\t\t\t>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t:placeholder=\"__('Search')\"\n\t\t\t\t\t\tv-model=\"searchQuery\"\n\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t\t@input=\"updateJobs\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<Search\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4 stroke-1.5 text-ink-gray-5\"\n\t\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FormControl>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tdoctype=\"Country\"\n\t\t\t\t\t\tv-model=\"country\"\n\t\t\t\t\t\t:placeholder=\"__('Country')\"\n\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"jobType\"\n\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t:options=\"jobTypes\"\n\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t\t:placeholder=\"__('Type')\"\n\t\t\t\t\t\t@change=\"updateJobs\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"jobs.data?.length\" class=\"w-full md:w-4/5 mx-auto p-5 pt-0\">\n\t\t\t\t<div class=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n\t\t\t\t\t<router-link\n\t\t\t\t\t\tv-for=\"job in jobs.data\"\n\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\tname: 'JobDetail',\n\t\t\t\t\t\t\tparams: { job: job.name },\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t:key=\"job.name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<JobCard :job=\"job\" />\n\t\t\t\t\t</router-link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<EmptyState v-else type=\"Job Openings\" />\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tButton,\n\tBreadcrumbs,\n\tcall,\n\tcreateResource,\n\tFormControl,\n\tusePageMeta,\n} from 'frappe-ui'\nimport { Plus, Search } from 'lucide-vue-next'\nimport { sessionStore } from '../stores/session'\nimport { inject, computed, ref, onMounted, watch } from 'vue'\nimport JobCard from '@/components/JobCard.vue'\nimport Link from '@/components/Controls/Link.vue'\nimport EmptyState from '@/components/EmptyState.vue'\n\nconst user = inject('$user')\nconst jobType = ref(null)\nconst { brand } = sessionStore()\nconst searchQuery = ref('')\nconst country = ref(null)\nconst filters = ref({})\nconst orFilters = ref({})\nconst jobCount = ref(0)\nconst readOnlyMode = window.read_only_mode\n\nonMounted(() => {\n\tlet queries = new URLSearchParams(location.search)\n\tif (queries.has('type')) {\n\t\tjobType.value = queries.get('type')\n\t}\n\tupdateJobs()\n\tgetJobCount()\n})\n\nconst jobs = createResource({\n\turl: 'lms.lms.api.get_job_opportunities',\n\tcache: ['jobs'],\n})\n\nconst updateJobs = () => {\n\tupdateFilters()\n\tjobs.update({\n\t\tparams: {\n\t\t\tfilters: filters.value,\n\t\t\torFilters: orFilters.value,\n\t\t},\n\t})\n\tjobs.reload()\n}\n\nconst updateFilters = () => {\n\tfilters.value.status = 'Open'\n\tfilters.value.disabled = 0\n\n\tif (jobType.value) {\n\t\tfilters.value.type = jobType.value\n\t} else {\n\t\tdelete filters.value.type\n\t}\n\n\tif (searchQuery.value) {\n\t\torFilters.value = {\n\t\t\tjob_title: ['like', `%${searchQuery.value}%`],\n\t\t\tcompany_name: ['like', `%${searchQuery.value}%`],\n\t\t\tlocation: ['like', `%${searchQuery.value}%`],\n\t\t}\n\t} else {\n\t\torFilters.value = {}\n\t}\n\n\tif (country.value) {\n\t\tfilters.value.country = country.value\n\t} else {\n\t\tdelete filters.value.country\n\t}\n}\n\nconst getJobCount = () => {\n\tcall('frappe.client.get_count', {\n\t\tdoctype: 'Job Opportunity',\n\t\tfilters: {\n\t\t\tstatus: 'Open',\n\t\t\tdisabled: 0,\n\t\t},\n\t}).then((data) => {\n\t\tjobCount.value = data\n\t})\n}\n\nwatch(country, (val) => {\n\tupdateJobs()\n})\n\nconst jobTypes = computed(() => {\n\treturn [\n\t\t'',\n\t\t{ label: __('Full Time'), value: 'Full Time' },\n\t\t{ label: __('Part Time'), value: 'Part Time' },\n\t\t{ label: __('Contract'), value: 'Contract' },\n\t\t{ label: __('Freelance'), value: 'Freelance' },\n\t]\n})\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: __('Jobs'),\n\t\ticon: brand.favicon,\n\t}\n})\n</script>\n"],"names":["dayjs","inject","user","jobType","ref","brand","sessionStore","searchQuery","country","filters","orFilters","jobCount","readOnlyMode","onMounted","queries","updateJobs","getJobCount","jobs","createResource","updateFilters","call","data","watch","val","jobTypes","computed","usePageMeta"],"mappings":"m5BAkDA,MAAMA,EAAQC,EAAO,QAAQ,6iCCqD7B,MAAMC,EAAOD,EAAO,OAAO,EACrBE,EAAUC,EAAI,IAAI,EAClB,CAAE,MAAAC,CAAO,EAAGC,EAAY,EACxBC,EAAcH,EAAI,EAAE,EACpBI,EAAUJ,EAAI,IAAI,EAClBK,EAAUL,EAAI,CAAE,CAAA,EAChBM,EAAYN,EAAI,CAAE,CAAA,EAClBO,EAAWP,EAAI,CAAC,EAChBQ,EAAe,OAAO,eAE5BC,EAAU,IAAM,CACf,IAAIC,EAAU,IAAI,gBAAgB,SAAS,MAAM,EAC7CA,EAAQ,IAAI,MAAM,IACrBX,EAAQ,MAAQW,EAAQ,IAAI,MAAM,GAEnCC,EAAU,EACVC,EAAW,CACZ,CAAC,EAED,MAAMC,EAAOC,EAAe,CAC3B,IAAK,oCACL,MAAO,CAAC,MAAM,CACf,CAAC,EAEKH,EAAa,IAAM,CACxBI,EAAa,EACbF,EAAK,OAAO,CACX,OAAQ,CACP,QAASR,EAAQ,MACjB,UAAWC,EAAU,KACrB,CACD,CAAA,EACDO,EAAK,OAAM,CACZ,EAEME,EAAgB,IAAM,CAC3BV,EAAQ,MAAM,OAAS,OACvBA,EAAQ,MAAM,SAAW,EAErBN,EAAQ,MACXM,EAAQ,MAAM,KAAON,EAAQ,MAE7B,OAAOM,EAAQ,MAAM,KAGlBF,EAAY,MACfG,EAAU,MAAQ,CACjB,UAAW,CAAC,OAAQ,IAAIH,EAAY,KAAK,GAAG,EAC5C,aAAc,CAAC,OAAQ,IAAIA,EAAY,KAAK,GAAG,EAC/C,SAAU,CAAC,OAAQ,IAAIA,EAAY,KAAK,GAAG,CAC9C,EAEEG,EAAU,MAAQ,CAAA,EAGfF,EAAQ,MACXC,EAAQ,MAAM,QAAUD,EAAQ,MAEhC,OAAOC,EAAQ,MAAM,OAEvB,EAEMO,EAAc,IAAM,CACzBI,EAAK,0BAA2B,CAC/B,QAAS,kBACT,QAAS,CACR,OAAQ,OACR,SAAU,CACV,CACH,CAAE,EAAE,KAAMC,GAAS,CACjBV,EAAS,MAAQU,CACjB,CAAA,CACF,EAEAC,EAAMd,EAAUe,GAAQ,CACvBR,EAAU,CACX,CAAC,EAED,MAAMS,EAAWC,EAAS,IAClB,CACN,GACA,CAAE,MAAO,GAAG,WAAW,EAAG,MAAO,WAAa,EAC9C,CAAE,MAAO,GAAG,WAAW,EAAG,MAAO,WAAa,EAC9C,CAAE,MAAO,GAAG,UAAU,EAAG,MAAO,UAAY,EAC5C,CAAE,MAAO,GAAG,WAAW,EAAG,MAAO,WAAa,CAChD,CACC,EAED,OAAAC,EAAY,KACJ,CACN,MAAO,GAAG,MAAM,EAChB,KAAMrB,EAAM,OACd,EACC"}