{"version":3,"file":"ProfileAbout-ClETe2e3.js","sources":["../../../../frontend/src/pages/ProfileAbout.vue"],"sourcesContent":["<template>\n\t<div class=\"mt-7 mb-10\">\n\t\t<h2 class=\"mb-3 text-lg font-semibold text-ink-gray-9\">\n\t\t\t{{ __('About') }}\n\t\t</h2>\n\t\t<div\n\t\t\tv-if=\"profile.data.bio\"\n\t\t\tv-html=\"profile.data.bio\"\n\t\t\tclass=\"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal\"\n\t\t></div>\n\t\t<div v-else class=\"text-ink-gray-7 text-sm italic\">\n\t\t\t{{ __('No introduction') }}\n\t\t</div>\n\t</div>\n\t<div class=\"mt-7 mb-10\" v-if=\"badges.data?.length\">\n\t\t<h2 class=\"mb-3 text-lg font-semibold text-ink-gray-9\">\n\t\t\t{{ __('Achievements') }}\n\t\t</h2>\n\t\t<div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n\t\t\t<div v-for=\"badge in badges.data\">\n\t\t\t\t<Popover trigger=\"hover\" :leaveDelay=\"Number(0.01)\">\n\t\t\t\t\t<template #target>\n\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t:src=\"badge.badge_image\"\n\t\t\t\t\t\t\t\t:alt=\"badge.badge\"\n\t\t\t\t\t\t\t\tclass=\"h-[80px]\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"badge.count > 1\"\n\t\t\t\t\t\t\t\tclass=\"flex items-end bg-surface-gray-2 p-2 text-xs font-semibold rounded-full absolute right-0 bottom-0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<X class=\"w-3 h-3\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{{ badge.count }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #body-main>\n\t\t\t\t\t\t<div class=\"w-[250px] text-base\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t:src=\"badge.badge_image\"\n\t\t\t\t\t\t\t\t:alt=\"badge.badge\"\n\t\t\t\t\t\t\t\tclass=\"bg-surface-gray-2 rounded-t-md h-[200px] mx-auto\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div class=\"p-5\">\n\t\t\t\t\t\t\t\t<div class=\"text-2xl font-semibold mb-2\">\n\t\t\t\t\t\t\t\t\t{{ badge.badge }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"leading-5 mb-4\">\n\t\t\t\t\t\t\t\t\t{{ badge.badge_description }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"flex flex-col mb-4\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs text-ink-gray-7 font-medium mb-1\">\n\t\t\t\t\t\t\t\t\t\t{{ __('Issued on') }}:\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{{ dayjs(badge.issued_on).format('DD MMM YYYY') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs text-ink-gray-7 font-medium mb-1\">\n\t\t\t\t\t\t\t\t\t\t{{ __('Share on') }}:\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"shareOnSocial(badge, 'LinkedIn')\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkedinIcon class=\"h-3 w-3 text-ink-gray-7\" />\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ __('LinkedIn') }}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"shareOnSocial(badge, 'Twitter')\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t\t\t\t\t<Twitter class=\"h-3 w-3 text-ink-gray-7\" />\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ __('Twitter') }}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</Popover>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { inject } from 'vue'\nimport { createResource, Popover, Button } from 'frappe-ui'\nimport { X, LinkedinIcon, Twitter } from 'lucide-vue-next'\nimport { sessionStore } from '@/stores/session'\n\nconst dayjs = inject('$dayjs')\nconst { branding } = sessionStore()\n\nconst props = defineProps({\n\tprofile: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n})\n\nconst badges = createResource({\n\turl: 'frappe.client.get_list',\n\tparams: {\n\t\tdoctype: 'LMS Badge Assignment',\n\t\tfields: ['name', 'badge', 'badge_image', 'badge_description', 'issued_on'],\n\t\tfilters: {\n\t\t\tmember: props.profile.data.name,\n\t\t},\n\t},\n\tauto: true,\n\ttransform(data) {\n\t\tlet finalBadges = []\n\t\tlet groupedBadges = Object.groupBy(data, ({ badge }) => badge)\n\t\tfor (let badge in groupedBadges) {\n\t\t\tlet badgeData = groupedBadges[badge][0]\n\t\t\tbadgeData.count = groupedBadges[badge].length\n\t\t\tfinalBadges.push(badgeData)\n\t\t}\n\t\treturn finalBadges\n\t},\n})\n\nconst shareOnSocial = (badge, medium) => {\n\tlet shareUrl\n\tconst url = encodeURIComponent(\n\t\t`${window.location.origin}/lms/badges/${badge.badge}/${props.profile.data?.email}`\n\t)\n\tconst summary = `I am happy to announce that I earned the ${\n\t\tbadge.badge\n\t} badge on ${dayjs(badge.issued_on).format('DD MMM YYYY')} at ${\n\t\tbranding.data?.app_name\n\t}.`\n\n\tif (medium == 'LinkedIn')\n\t\tshareUrl = `https://www.linkedin.com/shareArticle?mini=true&url=${url}&text=${summary}`\n\telse if (medium == 'Twitter')\n\t\tshareUrl = `https://twitter.com/intent/tweet?text=${summary}&url=${url}`\n\n\twindow.open(shareUrl, '_blank')\n}\n</script>\n"],"names":["dayjs","inject","branding","sessionStore","props","__props","badges","createResource","data","finalBadges","groupedBadges","badge","badgeData","shareOnSocial","medium","shareUrl","url","_a","summary","_b"],"mappings":"gjCAwGA,MAAMA,EAAQC,EAAO,QAAQ,EACvB,CAAE,SAAAC,CAAU,EAAGC,EAAY,EAE3BC,EAAQC,EAORC,EAASC,EAAe,CAC7B,IAAK,yBACL,OAAQ,CACP,QAAS,uBACT,OAAQ,CAAC,OAAQ,QAAS,cAAe,oBAAqB,WAAW,EACzE,QAAS,CACR,OAAQH,EAAM,QAAQ,KAAK,IAC3B,CACD,EACD,KAAM,GACN,UAAUI,EAAM,CACf,IAAIC,EAAc,CAAA,EACdC,EAAgB,OAAO,QAAQF,EAAM,CAAC,CAAE,MAAAG,CAAK,IAAOA,CAAK,EAC7D,QAASA,KAASD,EAAe,CAChC,IAAIE,EAAYF,EAAcC,CAAK,EAAE,CAAC,EACtCC,EAAU,MAAQF,EAAcC,CAAK,EAAE,OACvCF,EAAY,KAAKG,CAAS,CAC7B,CACE,OAAOH,CACP,CACF,CAAC,EAEKI,EAAgB,CAACF,EAAOG,IAAW,SACxC,IAAIC,EACJ,MAAMC,EAAM,mBACX,GAAG,OAAO,SAAS,MAAM,eAAeL,EAAM,KAAK,KAAIM,EAAAb,EAAM,QAAQ,OAAd,YAAAa,EAAoB,KAAK,EAClF,EACOC,EAAU,4CACfP,EAAM,KACR,aAAcX,EAAMW,EAAM,SAAS,EAAE,OAAO,aAAa,CAAC,QACxDQ,EAAAjB,EAAS,OAAT,YAAAiB,EAAe,QACjB,IAEKL,GAAU,WACbC,EAAW,uDAAuDC,CAAG,SAASE,CAAO,GAC7EJ,GAAU,YAClBC,EAAW,yCAAyCG,CAAO,QAAQF,CAAG,IAEvE,OAAO,KAAKD,EAAU,QAAQ,CAC/B"}