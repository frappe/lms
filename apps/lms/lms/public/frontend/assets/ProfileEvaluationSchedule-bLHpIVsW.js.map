{"version":3,"file":"ProfileEvaluationSchedule-bLHpIVsW.js","sources":["../../../../node_modules/frappe-ui/src/components/Calendar/calendarUtils.js","../../../../node_modules/frappe-ui/src/components/Calendar/NewEventModal.vue","../../../../node_modules/frappe-ui/src/components/Calendar/CalendarEvent.vue","../../../../node_modules/frappe-ui/src/components/Calendar/composables/useCalendarData.js","../../../../node_modules/frappe-ui/src/components/Calendar/ShowMoreCalendarEvent.vue","../../../../node_modules/frappe-ui/src/components/Calendar/CalendarMonthly.vue","../../../../node_modules/frappe-ui/src/components/Calendar/CalendarTimeMarker.vue","../../../../node_modules/frappe-ui/src/components/Calendar/CalendarWeekly.vue","../../../../node_modules/frappe-ui/src/components/Calendar/CalendarDaily.vue","../../../../node_modules/frappe-ui/src/components/Calendar/composables/useEventModal.js","../../../../node_modules/frappe-ui/src/components/Calendar/Calendar.vue","../../../../frontend/src/components/Controls/Rating.vue","../../../../frontend/src/components/Modals/Event.vue","../../../../frontend/src/pages/ProfileEvaluationSchedule.vue"],"sourcesContent":["export function getCalendarDates(month, year) {\n  let daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n  let firstDay = new Date(year, month, 1)\n  let leftPadding = firstDay.getDay()\n\n  let datesInPreviousMonth = getBeforeDates(firstDay, leftPadding)\n  let datesInCurrentMonth = getCurrentMonthDates(firstDay)\n  let datesTillNow = [...datesInPreviousMonth, ...datesInCurrentMonth]\n  let datesInNextMonth = getNextMonthDates(datesTillNow)\n\n  let allDates = [...datesTillNow, ...datesInNextMonth]\n\n  return allDates\n\n  function getCurrentMonthDates(date) {\n    let month = date.getMonth()\n    if (month == 1 && isLeapYear(date)) {\n      daysInMonth[month] = 29\n    }\n\n    let numberOfDays = daysInMonth[month] + 1\n    let allDates = getDatesAfter(date, 1, numberOfDays)\n    return allDates\n  }\n\n  function getBeforeDates(firstDay, leftPadding) {\n    let allDates = getDatesAfter(firstDay, 0, leftPadding, -1)\n    allDates = allDates.reverse()\n    return allDates\n  }\n\n  function getNextMonthDates(currentAndPreviousMonthDates) {\n    const numberofDaysInCalendar =\n      currentAndPreviousMonthDates.length > 35 ? 42 : 35\n    let lengthOfDates = currentAndPreviousMonthDates.length\n    let lastDate = currentAndPreviousMonthDates[lengthOfDates - 1]\n    let diff = numberofDaysInCalendar - lengthOfDates + 1\n\n    let allDates = getDatesAfter(lastDate, 1, diff, 1, true)\n    return allDates\n  }\n\n  function getDatesAfter(\n    date,\n    startIndex,\n    counter,\n    stepper = 1,\n    getNextMonthDates = false,\n  ) {\n    let allDates = []\n    for (let index = startIndex; index < counter; index++) {\n      let tempDate = new Date(\n        date.getFullYear(),\n        getNextMonthDates ? date.getMonth() + 1 : date.getMonth(),\n        index * stepper,\n      )\n      allDates.push(tempDate)\n    }\n    return allDates\n  }\n\n  function isLeapYear(date) {\n    let year = date.getFullYear()\n    return year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)\n  }\n}\n\nexport function groupBy(obj, fn) {\n  if (typeof fn !== 'function') throw new Error(`${fn} should be a function`)\n  return Object.keys(obj).reduce((acc, key) => {\n    const group = fn(obj[key])\n    if (!acc[group]) {\n      acc[group] = []\n    }\n    acc[group].push(obj[key])\n    return acc\n  }, {})\n}\n\nexport function calculateMinutes(time) {\n  let [hours, minutes] = time.split(':')\n  return parseInt(hours) * 60 + parseInt(minutes)\n}\n\nexport function convertMinutesToHours(minutes) {\n  let hours = Math.floor(minutes / 60)\n  let remainingMinutes = minutes % 60\n  if (hours < 10) hours = `0${hours}`\n  if (remainingMinutes < 10) remainingMinutes = `0${remainingMinutes}`\n  return `${hours}:${remainingMinutes}:00`\n}\n\nexport function parseDate(date) {\n  if (typeof date === 'string') {\n    date = new Date(date)\n  }\n  let dd = date.getDate()\n  let mm = date.getMonth() + 1\n  let yyyy = date.getFullYear()\n\n  if (dd < 10) dd = '0' + dd\n  if (mm < 10) mm = '0' + mm\n\n  return `${yyyy}-${mm}-${dd}`\n}\n\nexport function parseDateEventPopupFormat(\n  date,\n  showDay = true,\n  showMonth = true,\n  weekDay = 'short',\n) {\n  const options = {\n    day: 'numeric',\n  }\n  if (showMonth) {\n    options.month = 'short'\n  }\n\n  if (showDay) {\n    options.weekday = weekDay\n  }\n  return date.toLocaleDateString('en-US', options)\n}\n\nexport function parseDateWithComma(date, showDay = false) {\n  return parseDateEventPopupFormat(date, showDay).split(' ').join(', ')\n}\n\nexport function parseDateWithDay(date, fullDay = false) {\n  return fullDay\n    ? daysListFull[date.getDay()] + ', ' + date.getDate()\n    : daysList[date.getDay()] + ' ' + date.getDate()\n}\n\nexport function calculateDiff(from, to) {\n  let fromMinutes = calculateMinutes(from)\n  let toMinutes = calculateMinutes(to)\n  return toMinutes - fromMinutes\n}\n\nexport function handleSeconds(time) {\n  return time.split(':').slice(0, 2).join(':') + ':00'\n}\n\nexport function findOverlappingEventsCount(events) {\n  // Sort events based on start time\n  events = events.sort((a, b) => a.startTime - b.startTime)\n\n  let hallNumber = 0\n  const result = []\n\n  for (const event of events) {\n    const availableHall = result.find(\n      (hall) => hall[hall.length - 1].endTime <= event.startTime,\n    )\n\n    if (availableHall) {\n      availableHall.push(event)\n    } else {\n      result.push([event])\n      hallNumber++\n    }\n  }\n\n  // flattening halls and events\n  return result\n    .map((hall, idx) =>\n      hall.map((event, eventIdx) => ({\n        ...event,\n        hallNumber: idx,\n        idx: eventIdx,\n      })),\n    )\n    .flat()\n}\n\n// Helpers\n\nexport const monthList = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n]\n\nexport const daysList = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\nexport const daysListFull = [\n  'Sunday',\n  'Monday',\n  'Tuesday',\n  'Wednesday',\n  'Thursday',\n  'Friday',\n  'Saturday',\n]\nexport const twelveHoursFormat = [\n  '12 am',\n  '1 am',\n  '2 am',\n  '3 am',\n  '4 am',\n  '5 am',\n  '6 am',\n  '7 am',\n  '8 am',\n  '9 am',\n  '10 am',\n  '11 am',\n  '12 pm',\n  '1 pm',\n  '2 pm',\n  '3 pm',\n  '4 pm',\n  '5 pm',\n  '6 pm',\n  '7 pm',\n  '8 pm',\n  '9 pm',\n  '10 pm',\n  '11 pm',\n]\nexport const twentyFourHoursFormat = [\n  '00:00',\n  '01:00',\n  '02:00',\n  '03:00',\n  '04:00',\n  '05:00',\n  '06:00',\n  '07:00',\n  '08:00',\n  '09:00',\n  '10:00',\n  '11:00',\n  '12:00',\n  '13:00',\n  '14:00',\n  '15:00',\n  '16:00',\n  '17:00',\n  '18:00',\n  '19:00',\n  '20:00',\n  '21:00',\n  '22:00',\n  '23:00',\n]\n\nexport const colorMap = {\n  blue: {\n    background_color: 'bg-blue-100',\n    border_color: 'border-blue-600',\n  },\n  green: {\n    background_color: 'bg-green-100',\n    border_color: 'border-green-600',\n  },\n  red: {\n    background_color: 'bg-red-200',\n    border_color: 'border-red-600',\n  },\n  orange: {\n    background_color: 'bg-orange-100',\n    border_color: 'border-orange-600',\n  },\n  yellow: {\n    background_color: 'bg-yellow-100',\n    border_color: 'border-yellow-600',\n  },\n  teal: {\n    background_color: 'bg-teal-100',\n    border_color: 'border-teal-600',\n  },\n  violet: {\n    background_color: 'bg-violet-100',\n    border_color: 'border-violet-600',\n  },\n  cyan: {\n    background_color: 'bg-cyan-100',\n    border_color: 'border-cyan-600',\n  },\n  purple: {\n    background_color: 'bg-purple-100',\n    border_color: 'border-purple-600',\n  },\n  pink: {\n    background_color: 'bg-pink-100',\n    border_color: 'border-pink-600',\n  },\n  amber: {\n    background_color: 'bg-amber-100',\n    border_color: 'border-amber-600',\n  },\n}\n\nexport function formattedDuration(from_time, to_time, timeFormat) {\n  from_time = formatTime(from_time, timeFormat)\n  to_time = formatTime(to_time, timeFormat)\n  return from_time + ' - ' + to_time\n}\n\nexport function formatTime(time, format) {\n  if (format === '12h') {\n    let [hours, minutes] = time.split(':')\n    hours = parseInt(hours)\n    const ampm = hours >= 12 ? 'pm' : 'am'\n    hours = hours % 12\n    hours = hours ? hours : 12 // the hour '0' should be '12'\n\n    // if minutes is 00, remove it\n    if (minutes === '00') {\n      return `${hours} ${ampm}`\n    }\n    time = `${hours}:${minutes} ${ampm}`\n  }\n  return time\n}\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      title: props.event.hasOwnProperty('id') ? 'Edit Event' : 'New Event',\n      actions: [\n        {\n          label: 'Submit',\n          variant: 'solid',\n        },\n      ],\n    }\"\n    class=\"z-50\"\n  >\n    <template #body-content>\n      <div>\n        <div class=\"grid grid-cols-1 gap-4\">\n          <FormControl\n            type=\"Input\"\n            v-model=\"newEvent.title\"\n            label=\"Title\"\n            placeholder=\"Meet with John Doe\"\n          />\n          <FormControl\n            type=\"Date\"\n            v-model=\"newEvent.date\"\n            label=\"Date\"\n            required=\"true\"\n            @blur=\"validateFields()\"\n          />\n\n          <FormControl\n            type=\"Input\"\n            v-model=\"newEvent.participant\"\n            label=\"Person\"\n            placeholder=\"John Doe\"\n          />\n\n          <FormControl\n            type=\"time\"\n            v-model=\"newEvent.from_time\"\n            label=\"Start Time\"\n            @blur=\"validateFields()\"\n            v-if=\"!newEvent.isFullDay\"\n          />\n\n          <FormControl\n            type=\"time\"\n            v-model=\"newEvent.to_time\"\n            label=\"End Time\"\n            @blur=\"validateFields()\"\n            v-if=\"!newEvent.isFullDay\"\n          />\n\n          <FormControl\n            type=\"Input\"\n            v-model=\"newEvent.venue\"\n            label=\"Venue\"\n            placeholder=\"Frappe, Neelkanth Business Park\"\n          />\n          <FormControl\n            type=\"select\"\n            v-model=\"newEvent.color\"\n            :options=\"colors\"\n            label=\"Color\"\n            class=\"form-control prefix\"\n          >\n            <template #prefix>\n              <div\n                class=\"h-5 w-5 rounded-full shadow-md\"\n                :class=\"[\n                  colorMap[newEvent?.color]?.background_color || 'bg-green-100',\n                ]\"\n              />\n            </template>\n          </FormControl>\n          <FormControl\n            type=\"checkbox\"\n            label=\"Full Day Event?\"\n            v-model=\"newEvent.isFullDay\"\n          />\n          <ErrorMessage :message=\"errorMessage\" v-if=\"errorMessage\" />\n        </div>\n      </div>\n    </template>\n    <template #actions=\"{ close }\">\n      <div class=\"flex flex-row-reverse gap-2\">\n        <Button\n          class=\"w-full\"\n          variant=\"solid\"\n          @click=\"submitEvent(close)\"\n          label=\"Submit\"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport { computed, inject, reactive, ref } from 'vue'\nimport Dialog from '../Dialog.vue'\nimport FormControl from '../FormControl.vue'\nimport ErrorMessage from '../ErrorMessage.vue'\nimport { Button } from '../Button'\n\nimport { calculateDiff, colorMap, handleSeconds } from './calendarUtils'\nconst show = ref(false)\n\nconst props = defineProps({\n  event: {\n    type: Object,\n  },\n})\n\nconst newEvent = reactive({\n  title: props.event?.title || '',\n  date: props.event?.date || '',\n  participant: props.event?.participant || '',\n  from_time: props.event?.from_time || '',\n  to_time: props.event?.to_time || '',\n  venue: props.event?.venue || '',\n  color: props.event?.color || 'green',\n  id: '',\n  isFullDay: props.event?.isFullDay || false,\n})\n\nconst isUpdated = computed(() => {\n  return (\n    newEvent.title !== props.event.title ||\n    newEvent.date !== props.event.date ||\n    newEvent.participant !== props.event.participant ||\n    newEvent.from_time !== props.event.from_time ||\n    newEvent.to_time !== props.event.to_time ||\n    newEvent.venue !== props.event.venue ||\n    newEvent.color !== props.event.color ||\n    newEvent.isFullDay !== props.event.isFullDay\n  )\n})\n\nconst colors = Object.keys(colorMap)\n\nconst errorMessage = ref('')\nfunction validateFields() {\n  if (!newEvent.date) {\n    errorMessage.value = 'Date is required'\n  } else if (!newEvent.from_time && !newEvent.isFullDay) {\n    errorMessage.value = 'Start Time is required'\n  } else if (!newEvent.to_time && !newEvent.isFullDay) {\n    errorMessage.value = 'End Time is required'\n  } else {\n    errorMessage.value = ''\n  }\n  if (\n    newEvent.hasOwnProperty('from_time') &&\n    newEvent.hasOwnProperty('to_time')\n  ) {\n    validateStartEndTime()\n  }\n}\n\nfunction validateStartEndTime() {\n  let timeDiff = calculateDiff(newEvent.from_time, newEvent.to_time)\n  if (timeDiff <= 0) {\n    errorMessage.value = 'Start time must be less than End Time'\n  }\n}\n\nconst calendarActions = inject('calendarActions')\n\nfunction submitEvent(close) {\n  validateFields()\n  if (errorMessage.value) {\n    return\n  }\n  if (!isUpdated.value) {\n    close()\n    return\n  }\n\n  // if it has ID then event already exists\n  handleEventTime()\n  if (props.event.hasOwnProperty('id')) {\n    newEvent.id = props.event.id\n    calendarActions.updateEventState(newEvent)\n  }\n  // else new event is created with ID\n  else {\n    const id = '#' + Math.random().toString(36).substring(3, 9)\n    newEvent.id = id\n    calendarActions.createNewEvent(newEvent)\n  }\n  close()\n}\n\nfunction handleEventTime() {\n  if (newEvent.isFullDay) {\n    newEvent.from_time = ''\n    newEvent.to_time = ''\n  } else {\n    newEvent.from_time = handleSeconds(newEvent.from_time)\n    newEvent.to_time = handleSeconds(newEvent.to_time)\n  }\n}\n</script>\n\n<style>\n.form-control.prefix select {\n  padding-left: 2.2rem !important;\n  text-transform: capitalize !important;\n}\n</style>\n","<template>\n  <!-- Weekly and Daily Event Template  -->\n  <div\n    class=\"h-min-[18px] rounded-lg p-2 transition-all duration-75\"\n    ref=\"eventRef\"\n    v-if=\"activeView !== 'Month'\"\n    v-bind=\"$attrs\"\n    :class=\"[\n      colorMap[props.event?.color]?.background_color || 'bg-green-100',\n      'shadow-lg',\n      opened && '!z-20 drop-shadow-xl',\n    ]\"\n    :style=\"setEventStyles\"\n    @dblclick.prevent=\"handleEventEdit($event)\"\n    @click.prevent=\"handleEventClick($event)\"\n    v-on=\"{\n      mousedown: config.isEditMode && handleRepositionMouseDown,\n    }\"\n  >\n    <div\n      class=\"relative flex h-full select-none items-start gap-2 overflow-hidden px-2\"\n      :class=\"\n        props.event.from_time && [\n          'border-l-2',\n          colorMap[props.event?.color]?.border_color || 'border-green-600',\n        ]\n      \"\n    >\n      <div v-if=\"config.showIcon && eventIcons[props.event.type]\">\n        <component\n          v-if=\"eventIcons[props.event.type]\"\n          :is=\"eventIcons[props.event.type]\"\n          class=\"h-4 w-4 text-black\"\n        />\n      </div>\n\n      <div\n        class=\"flex w-fit flex-col overflow-hidden whitespace-nowrap text-gray-800\"\n      >\n        <p class=\"text-ellipsis text-sm font-medium truncate\">\n          {{ props.event.title || 'New Event' }}\n        </p>\n        <p\n          class=\"text-ellipsis text-xs font-normal\"\n          v-if=\"!props.event.isFullDay\"\n        >\n          {{\n            formattedDuration(\n              updatedEvent.from_time,\n              updatedEvent.to_time,\n              config.timeFormat,\n            )\n          }}\n        </p>\n      </div>\n    </div>\n    <div\n      v-if=\"config.isEditMode && !event.isFullDay\"\n      class=\"absolute h-[8px] w-[100%] cursor-row-resize\"\n      ref=\"resize\"\n      @mousedown=\"handleResizeMouseDown\"\n    />\n  </div>\n\n  <!-- Monthly Event Template -->\n  <div\n    v-else\n    class=\"h-min-[18px] rounded-lg p-2 transition-all duration-75\"\n    ref=\"eventRef\"\n    v-bind=\"$attrs\"\n    :class=\"[colorMap[props.event?.color]?.background_color || 'bg-green-100']\"\n    @dblclick.prevent=\"handleEventEdit($event)\"\n    @click=\"handleEventClick($event)\"\n  >\n    <div\n      class=\"relative flex h-full select-none items-start gap-2 overflow-hidden px-2\"\n      :class=\"\n        props.event.from_time && [\n          'border-l-2',\n          colorMap[props.event?.color]?.border_color || 'border-green-600',\n        ]\n      \"\n    >\n      <div v-if=\"config.showIcon && eventIcons[props.event.type]\">\n        <component\n          v-if=\"eventIcons[props.event.type]\"\n          :is=\"eventIcons[props.event.type]\"\n          class=\"h-4 w-4 text-black\"\n        />\n      </div>\n\n      <div\n        class=\"flex w-fit flex-col text-start overflow-hidden whitespace-nowrap text-gray-800\"\n      >\n        <p class=\"text-sm font-medium truncate\">\n          {{ props.event.title || 'New Event' }}\n        </p>\n        <p v-if=\"props.event.from_time\" class=\"text-xs font-normal\">\n          {{\n            formattedDuration(\n              updatedEvent.from_time,\n              updatedEvent.to_time,\n              config.timeFormat,\n            )\n          }}\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div\n    ref=\"floating\"\n    :style=\"{ ...floatingStyles, zIndex: 100 }\"\n    v-if=\"opened\"\n    class=\"rounded shadow-xl\"\n  >\n    <EventModalContent\n      :calendarEvent=\"calendarEvent\"\n      :date=\"date\"\n      :isEditMode=\"config.isEditMode\"\n      @close=\"close\"\n      @edit=\"handleEventEdit\"\n      @delete=\"handleEventDelete\"\n      class=\"shadow-xl\"\n    />\n  </div>\n  <NewEventModal v-model=\"showEventModal\" :event=\"updatedEvent\" />\n</template>\n\n<script setup>\nimport FeatherIcon from '../FeatherIcon.vue'\nimport EventModalContent from './EventModalContent.vue'\nimport NewEventModal from './NewEventModal.vue'\nimport { useFloating, shift, flip, offset, autoUpdate } from '@floating-ui/vue'\n\nimport {\n  ref,\n  inject,\n  computed,\n  onMounted,\n  onBeforeUnmount,\n  watch,\n  reactive,\n} from 'vue'\n\nimport {\n  calculateMinutes,\n  convertMinutesToHours,\n  calculateDiff,\n  parseDate,\n  colorMap,\n  formattedDuration,\n} from './calendarUtils'\n\nconst props = defineProps({\n  event: {\n    type: Object,\n    required: true,\n  },\n  date: {\n    type: Date,\n    required: true,\n  },\n})\n\nconst activeView = inject('activeView')\nconst config = inject('config')\nconst calendarActions = inject('calendarActions')\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n})\n\nonBeforeUnmount(() => {\n  document.removeEventListener('click', handleClickOutside)\n})\nfunction handleClickOutside(e) {\n  const insidePopover = floating.value && floating.value.contains(e.target)\n  if (insidePopover) return\n  const insideTarget = eventRef.value && eventRef.value.contains(e.target)\n  if (insideTarget) return\n  close()\n}\n\nconst calendarEvent = ref(props.event)\n\nconst updatedEvent = reactive({\n  ...props.event,\n})\n\nwatch(\n  () => props.event,\n  (newVal) => {\n    updatedEvent.from_time = newVal.from_time\n    updatedEvent.to_time = newVal.to_time\n    calendarEvent.value = newVal\n  },\n  { deep: true },\n)\n\nconst eventIcons = config.eventIcons\nconst minuteHeight = config.hourHeight / 60\nconst height_15_min = minuteHeight * 15\n\nconst state = reactive({\n  xAxis: 0,\n  yAxis: 0,\n})\n\nconst heightThreshold = 40\nconst minimumHeight = 32.5\nconst setEventStyles = computed(() => {\n  if (props.event.isFullDay) {\n    return {\n      transform: `translate(${state.xAxis}px, ${state.yAxis}px)`,\n      zIndex: isRepositioning ? 100 : props.event.idx + 1,\n    }\n  }\n\n  let diff = calculateDiff(\n    calendarEvent.value.from_time,\n    calendarEvent.value.to_time,\n  )\n  let height = diff * minuteHeight\n  if (height < heightThreshold) {\n    height = minimumHeight\n  }\n  height += 'px'\n\n  let top = calculateMinutes(calendarEvent.value.from_time) * minuteHeight\n  if (activeView.value === 'Day') {\n    top += config.redundantCellHeight\n  }\n\n  let hallNumber = calendarEvent.value.hallNumber\n  let width =\n    isResizing.value || isRepositioning.value\n      ? '100%'\n      : `${80 - hallNumber * 20}%`\n  let left =\n    isResizing.value || isRepositioning.value ? '0' : `${hallNumber * 20}%`\n  let zIndex =\n    isResizing.value || isRepositioning.value\n      ? 100\n      : (props.event.idx || 1) * hallNumber + 1\n  // border: 1px solid #fff;\n  let border = hallNumber >= 1 ? '1px solid #fff' : ''\n\n  return {\n    height,\n    top: top + 'px',\n    zIndex: zIndex,\n    left,\n    width,\n    transform: `translate(${state.xAxis}px, ${state.yAxis}px)`,\n    borderLeft: border,\n    borderTop: border,\n  }\n})\n\nconst eventRef = ref(null)\n// Popover Element Config\nconst floating = ref(null)\nconst { floatingStyles } = useFloating(eventRef, floating, {\n  placement: activeView.value === 'Day' ? 'top' : 'right',\n  middleware: [offset(10), flip(), shift()],\n  whileElementsMounted: autoUpdate,\n})\n\nconst opened = ref(false)\nconst resize = ref(null)\nconst isResizing = ref(false)\nconst isRepositioning = ref(false)\nconst isEventUpdated = ref(false)\n\nfunction newEventEndTime(newHeight) {\n  let newEndTime =\n    parseFloat(newHeight) / minuteHeight +\n    calculateMinutes(calendarEvent.value.from_time)\n  newEndTime = Math.floor(newEndTime)\n  if (newEndTime > 1440) {\n    newEndTime = 1440\n  }\n  return convertMinutesToHours(newEndTime)\n}\n\nconst preventClick = ref(false)\nfunction handleResizeMouseDown(e) {\n  isResizing.value = true\n  isRepositioning.value = false\n\n  let oldTime = calendarEvent.value.to_time\n  window.addEventListener('mousemove', resize)\n  window.addEventListener('mouseup', stopResize, { once: true })\n\n  function resize(e) {\n    preventClick.value = true\n    // difference between where mouse is and where event's top is, to find the new height\n    let diffX = e.clientY - eventRef.value.getBoundingClientRect().top\n    eventRef.value.style.height =\n      Math.round(diffX / height_15_min) * height_15_min + 'px'\n\n    eventRef.value.style.width = '100%'\n    updatedEvent.to_time = newEventEndTime(eventRef.value.style.height)\n    calendarEvent.value.to_time = newEventEndTime(eventRef.value.style.height)\n  }\n\n  function stopResize() {\n    isResizing.value = false\n    if (oldTime !== calendarEvent.value.to_time) {\n      calendarActions.updateEventState(calendarEvent.value)\n    }\n\n    window.removeEventListener('mousemove', resize)\n  }\n}\n\nfunction handleRepositionMouseDown(e) {\n  e.preventDefault()\n  let prevY = e.clientY\n  const rect = eventRef.value.getBoundingClientRect()\n\n  if (isResizing.value) return\n\n  window.addEventListener('mousemove', mousemove)\n  window.addEventListener('mouseup', mouseup)\n\n  function mousemove(e) {\n    isRepositioning.value = true\n    preventClick.value = true\n    if (!eventRef.value) return\n    close()\n    eventRef.value.style.cursor = 'grabbing'\n\n    // handle movement between days\n    if (activeView.value === 'Week') {\n      handleHorizontalMovement(e.clientX, rect)\n    }\n\n    // handle movement within the same day\n    if (!props.event.isFullDay) handleVerticalMovement(e.clientY, prevY, rect)\n\n    if (\n      calendarEvent.value.from_time !== updatedEvent.from_time ||\n      calendarEvent.value.to_time !== updatedEvent.to_time\n    ) {\n      isEventUpdated.value = true\n    } else {\n      isEventUpdated.value = false\n    }\n  }\n\n  function mouseup(e) {\n    e.preventDefault()\n    isRepositioning.value = false\n    if (!eventRef.value) return\n\n    eventRef.value.style.cursor = 'pointer'\n    if (calendarEvent.value.isFullDay && activeView.value === 'Week') {\n      eventRef.value.style.width = '90%'\n    }\n    if (calendarEvent.value.date !== updatedEvent.date) {\n      isEventUpdated.value = true\n    }\n    if (isEventUpdated.value) {\n      calendarEvent.value.date = updatedEvent.date\n      calendarEvent.value.from_time = updatedEvent.from_time\n      calendarEvent.value.to_time = updatedEvent.to_time\n      calendarActions.updateEventState(calendarEvent.value)\n      isEventUpdated.value = false\n      state.xAxis = 0\n      state.yAxis = 0\n    }\n\n    window.removeEventListener('mousemove', mousemove)\n    window.removeEventListener('mouseup', mouseup)\n  }\n}\n\nfunction getDate(date, nextDate = 0) {\n  let newDate = new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate() + nextDate,\n  )\n  return newDate\n}\n\nfunction handleHorizontalMovement(clientX, rect) {\n  const currentDate = new Date(\n    props.event.isFullDay\n      ? eventRef.value.parentNode.parentNode.getAttribute('data-date-attr')\n      : eventRef.value.parentNode.getAttribute('data-date-attr'),\n  )\n\n  if (props.event.isFullDay) {\n    eventRef.value.style.width = '100%'\n  }\n\n  let eventWidth = eventRef.value.clientWidth\n  let diff = Math.floor((clientX - rect.left) / eventWidth)\n\n  const leftBoundary = currentDate.getDay()\n  const rightBoundary = 6 - currentDate.getDay()\n  diff = handleHorizontalBoundary(diff, leftBoundary, rightBoundary)\n  let xPos = Math.ceil(diff * eventWidth)\n  state.xAxis = xPos\n  updatedEvent.date = parseDate(getDate(currentDate, diff))\n}\n\nfunction handleHorizontalBoundary(diff, leftBoundary, rightBoundary) {\n  if (diff < -leftBoundary) {\n    diff = -leftBoundary\n  } else if (diff > rightBoundary) {\n    diff = rightBoundary\n  }\n  return diff\n}\n\nfunction handleVerticalMovement(clientY, prevY, rect) {\n  let diffY = clientY - prevY\n\n  // handle boundaries for the calendar event\n  let parentTop = eventRef.value.parentNode.getBoundingClientRect().top\n  let parentBottom = eventRef.value.parentNode.getBoundingClientRect().bottom\n\n  // to prevent event from going above the top of the parent cell\n  if (clientY < parentTop) {\n    diffY = parentTop - rect.top\n  }\n  // to prevent event from going below the bottom of the parent cell\n  if (clientY > parentBottom) {\n    diffY = parentBottom - rect.bottom\n  }\n\n  diffY = Math.round(diffY / height_15_min) * height_15_min\n  state.yAxis = diffY\n\n  updatedEvent.from_time = convertMinutesToHours(\n    calculateMinutes(calendarEvent.value.from_time) +\n      Math.round(diffY / minuteHeight),\n  )\n  updatedEvent.to_time = convertMinutesToHours(\n    calculateMinutes(calendarEvent.value.to_time) +\n      Math.round(diffY / minuteHeight),\n  )\n  handleTimeConstraints()\n}\n\nfunction handleTimeConstraints() {\n  if (updatedEvent.from_time < '00:00:00') {\n    updatedEvent.from_time = '00:00:00'\n  }\n  if (updatedEvent.from_time > '24:00:00') {\n    updatedEvent.from_time = '24:00:00'\n  }\n  if (updatedEvent.to_time < '00:00:00') {\n    updatedEvent.to_time = '00:00:00'\n  }\n  if (updatedEvent.to_time > '24:00:00') {\n    updatedEvent.to_time = '24:00:00'\n  }\n}\n\nconst toggle = () => (opened.value = !opened.value)\nconst close = () => (opened.value = false)\n\nfunction handleDeleteShortcut(e) {\n  if (e.key === 'Delete' || e.key === 'Backspace') {\n    opened.value = false\n    handleEventDelete()\n  }\n}\n\nwatch(\n  () => opened.value,\n  (newVal) => {\n    if (newVal) {\n      if (!config.isEditMode) return\n      if (!config.enableShortcuts) return\n      document.addEventListener('keydown', handleDeleteShortcut, { once: true })\n    }\n  },\n)\n\nlet clickTimer = null\nfunction handleEventClick(e) {\n  // hack to prevent event modal from opening when resizing or repositioning\n  if (preventClick.value) {\n    preventClick.value = false\n    return\n  }\n\n  // hack: timeout to see whether it's a double click or a single click\n  if (e.detail === 1) {\n    clickTimer = setTimeout(() => {\n      calendarActions.props.onClick\n        ? calendarActions.props.onClick({\n            e,\n            calendarEvent: calendarEvent.value,\n          })\n        : toggle()\n    }, 200)\n  }\n}\n\nconst showEventModal = ref(false)\nfunction handleEventEdit(e = null) {\n  e && (e.cancelBubble = true)\n  // if it's a double click, clear the timeout\n  clearTimeout(clickTimer)\n  if (calendarActions.props.onDblClick) {\n    calendarActions.props.onDblClick({\n      e,\n      calendarEvent: calendarEvent.value,\n    })\n    return\n  }\n  if (!config.isEditMode) return\n  close()\n  showEventModal.value = true\n}\n\nfunction handleEventDelete() {\n  calendarActions.deleteEvent(calendarEvent.value.id)\n  close()\n}\n</script>\n","import { computed } from 'vue'\nimport {\n  groupBy,\n  calculateMinutes,\n  findOverlappingEventsCount,\n} from '../calendarUtils'\n\nexport default function useCalendarData(events, view = '') {\n  const timedEvents = computed(() => {\n    let groupByDate = groupBy(events, (row) => row.date)\n    let sortedArray = {}\n    if (view === 'Month') {\n      for (const [key, value] of Object.entries(groupByDate)) {\n        sortedArray[key] = sortMonthlyEvents(value)\n      }\n    } else {\n      for (let [key, value] of Object.entries(groupByDate)) {\n        value = value.filter((event) => !event.isFullDay)\n        value.forEach((task) => {\n          task.startTime = calculateMinutes(task.from_time)\n          task.endTime = calculateMinutes(task.to_time)\n        })\n        let sortedEvents = value.sort((a, b) => a.startTime - b.startTime)\n        sortedArray[key] = findOverlappingEventsCount(sortedEvents)\n      }\n    }\n    return sortedArray\n  })\n\n  const fullDayEvents = computed(() => {\n    let fullDay = events.filter((event) => event.isFullDay)\n    let dateGroup = groupBy(fullDay, (row) => row.date)\n    return dateGroup\n  })\n\n  return { timedEvents, fullDayEvents }\n}\n\nfunction sortMonthlyEvents(events) {\n  let fullDayEvents = events.filter((event) => event.isFullDay)\n  let timedEvents = events\n    .filter((event) => !event.isFullDay)\n    .sort((a, b) =>\n      a.from_time !== b.from_time\n        ? calculateMinutes(a.from_time) > calculateMinutes(b.from_time)\n          ? 1\n          : -1\n        : calculateMinutes(a.to_time) > calculateMinutes(b.to_time)\n          ? 1\n          : -1,\n    )\n  // full day events should be at the top in month view\n  return [...fullDayEvents, ...timedEvents]\n}\n","<template>\n  <CalendarEvent\n    :event=\"event\"\n    :date=\"date\"\n    :key=\"event.id\"\n    class=\"mb-1 cursor-pointer\"\n    v-bind=\"$attrs\"\n  />\n  <span\n    v-if=\"totalEventsCount > 1\"\n    class=\"w-fit rounded-sm p-px px-1.5 mx-1 text-base font-medium text-ink-gray-6 hover:cursor-pointer hover:bg-surface-gray-1\"\n    @click=\"emit('showMoreEvents')\"\n  >\n    +{{ totalEventsCount - 1 }} more\n  </span>\n</template>\n<script setup>\nimport CalendarEvent from './CalendarEvent.vue'\n\nconst props = defineProps({\n  event: {\n    type: Object,\n    required: true,\n  },\n  date: {\n    type: String,\n    required: true,\n  },\n  totalEventsCount: {\n    type: Number,\n    required: true,\n  },\n})\n\nconst emit = defineEmits(['showMoreEvents'])\n</script>\n<style></style>\n","<template>\n  <div class=\"flex flex-1 flex-col overflow-scroll\">\n    <!-- Day List -->\n    <div class=\"grid w-full grid-cols-7 py-2\">\n      <span\n        v-for=\"day in daysList\"\n        class=\"text-center text-base text-ink-gray-5\"\n        >{{ day }}</span\n      >\n    </div>\n\n    <!-- Date Grid -->\n    <div\n      class=\"grid w-full flex-1 grid-cols-7 border-outline-gray-1\"\n      :class=\"[\n        currentMonthDates.length > 35 ? 'grid-rows-6' : 'grid-rows-5',\n        config.noBorder ? 'border-t-[0.5px]' : 'border-[0.5px]',\n      ]\"\n    >\n      <div\n        v-for=\"date in currentMonthDates\"\n        class=\"overflow-y-auto border-[0.5px]\"\n        @dragover.prevent\n        @drageneter.prevent\n        @drop=\"onDrop($event, date)\"\n        @dblclick=\"calendarActions.handleCellDblClick($event, date)\"\n      >\n        <div\n          class=\"flex justify-center font-normal\"\n          :class=\"currentMonthDate(date) ? 'text-gray-700' : 'text-gray-200'\"\n        >\n          <div\n            class=\"flex gap-1 w-full flex-col items-center text-xs text-right\"\n          >\n            <span\n              v-if=\"currentMonthDate(date)\"\n              class=\"z-10 w-full flex justify-between items-center\"\n              :class=\"[\n                date.toDateString() === new Date().toDateString()\n                  ? 'py-0.5 px-1'\n                  : 'py-1 px-2',\n              ]\"\n            >\n              <div></div>\n              <div\n                :class=\"[\n                  date.toDateString() === new Date().toDateString()\n                    ? 'bg-surface-gray-7 text-ink-white rounded-sm p-[2px]'\n                    : 'bg-surface-white text-ink-gray-6',\n                ]\"\n              >\n                {{ date.getDate() }}\n              </div>\n            </span>\n            <span\n              v-else\n              class=\"z-10 w-full bg-surface-white py-1 px-2 text-ink-gray-4\"\n            >\n              {{ parseDateEventPopupFormat(date, (showDay = false)) }}\n            </span>\n\n            <div\n              class=\"w-full\"\n              v-if=\"timedEvents[parseDate(date)]?.length <= maxEventsInCell\"\n            >\n              <CalendarEvent\n                v-for=\"calendarEvent in timedEvents[parseDate(date)]\"\n                :event=\"calendarEvent\"\n                :date=\"date\"\n                class=\"z-10 mb-2 w-full cursor-pointer\"\n                :key=\"calendarEvent.id\"\n                :draggable=\"config.isEditMode\"\n                @dragstart=\"onDragStart($event, calendarEvent.id)\"\n                @dragend=\"$event.target.style.opacity = '1'\"\n                @dragover.prevent\n              />\n            </div>\n            <div v-else class=\"flex w-full flex-col justify-between\">\n              <ShowMoreCalendarEvent\n                v-if=\"timedEvents[parseDate(date)]\"\n                class=\"z-10 cursor-pointer\"\n                :draggable=\"config.isEditMode\"\n                @dragstart=\"\n                  onDragStart($event, timedEvents[parseDate(date)][0].id)\n                \"\n                @dragend=\"$event.target.style.opacity = '1'\"\n                @dragover.prevent\n                :event=\"timedEvents[parseDate(date)][0]\"\n                :date=\"date\"\n                :totalEventsCount=\"timedEvents[parseDate(date)].length\"\n                @showMoreEvents=\"emit('setCurrentDate', date)\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { parseDateEventPopupFormat, daysList, parseDate } from './calendarUtils'\nimport { inject } from 'vue'\nimport CalendarEvent from './CalendarEvent.vue'\nimport useCalendarData from './composables/useCalendarData'\nimport { computed } from 'vue'\nimport ShowMoreCalendarEvent from './ShowMoreCalendarEvent.vue'\nconst props = defineProps({\n  events: {\n    type: Object,\n    required: true,\n  },\n  currentMonthDates: {\n    type: Array,\n    required: true,\n  },\n  currentMonth: {\n    type: Number,\n    required: true,\n  },\n  config: {\n    type: Object,\n  },\n})\n\nconst emit = defineEmits(['setCurrentDate'])\n\nconst timedEvents = computed(\n  () => useCalendarData(props.events, 'Month').timedEvents.value,\n)\n\nconst maxEventsInCell = computed(() =>\n  props.currentMonthDates.length > 35 ? 1 : 2,\n)\n\nfunction currentMonthDate(date) {\n  return date.getMonth() === props.currentMonth\n}\n\nconst calendarActions = inject('calendarActions')\n\nconst onDragStart = (event, calendarEventID) => {\n  if (!calendarEventID) return\n  event.target.style.opacity = '0.5'\n  event.target.style.cursor = 'move'\n  event.dataTransfer.dropEffect = 'move'\n  event.dataTransfer.effectAllowed = 'move'\n  event.dataTransfer.setData('calendarEventID', calendarEventID)\n}\n\nconst onDrop = (event, date) => {\n  let calendarEventID = event.dataTransfer.getData('calendarEventID')\n  if (!calendarEventID) return\n  event.target.style.cursor = 'default'\n  // if same date then return\n  let e = props.events.find((e) => e.id === calendarEventID)\n  if (parseDate(date) === e.date) return\n  let calendarEvent = props.events.find((e) => e.id === calendarEventID)\n  calendarEvent.date = parseDate(date)\n  calendarActions.updateEventState(calendarEvent)\n}\n</script>\n","<template>\n  <div\n    class=\"absolute top-20 z-10 w-full pl-2\"\n    :style=\"setCurrentTime\"\n    v-if=\"new Date(date).toDateString() === new Date().toDateString()\"\n  >\n    <div class=\"current-time relative h-0.5 bg-red-600\" />\n  </div>\n</template>\n<script setup>\nimport { computed, inject } from 'vue'\n\nconst props = defineProps({\n  date: {\n    type: String,\n    required: true,\n  },\n  redundantCellHeight: {\n    type: Number,\n    default: 0,\n  },\n})\n\nconst config = inject('config')\nconst hourHeight = config.hourHeight\nconst minuteHeight = hourHeight / 60\n\nconst setCurrentTime = computed(() => {\n  let d = new Date()\n  let hour = d.getHours()\n  let minutes = d.getMinutes()\n  let top =\n    (hour * 60 + minutes) * minuteHeight + props.redundantCellHeight + 'px'\n  return { top }\n})\n</script>\n<style scoped>\n.current-time::before {\n  content: '';\n  display: block;\n  width: 12px;\n  height: 12px;\n  background-color: red;\n  border-radius: 50%;\n  position: absolute;\n  left: -8px;\n  top: -5px;\n}\n</style>\n","<template>\n  <div class=\"flex flex-col overflow-y-auto\">\n    <!-- Day List -->\n    <div class=\"flex border-b-[1px]\">\n      <div class=\"w-16\"></div>\n      <div class=\"mb-2 grid w-full grid-cols-7\">\n        <span\n          v-for=\"date in weeklyDates\"\n          class=\"relative p-2 text-center text-sm text-gray-600\"\n          :class=\"\n            isToday(date) ? 'font-semibold text-ink-gray-8' : 'font-normal'\n          \"\n        >\n          <div\n            v-if=\"isToday(date)\"\n            class=\"absolute left-[45%] top-0 h-[2px] w-5 bg-surface-gray-7\"\n          />\n          {{ parseDateWithDay(date) }}\n        </span>\n      </div>\n    </div>\n\n    <div\n      class=\"relative flex h-full flex-col overflow-auto border-outline-gray-1\"\n      :class=\"[config.noBorder ? '' : 'border-b-[1px] border-l-[1px]']\"\n      ref=\"gridRef\"\n    >\n      <div class=\"flex\">\n        <!-- Time List form 0 - 24 -->\n        <div class=\"grid w-16 grid-cols-1\">\n          <span\n            v-for=\"time in 24\"\n            class=\"flex items-end justify-center text-center text-sm font-normal text-gray-600\"\n            :style=\"{ height: `${hourHeight}px` }\"\n          />\n        </div>\n\n        <!-- Grid -->\n        <div class=\"flex w-full flex-col\">\n          <!-- full day events -->\n          <div class=\"grid w-full grid-cols-7\">\n            <div v-for=\"(date, idx) in weeklyDates\">\n              <div\n                class=\"flex w-full flex-col gap-1 border-b-[1px] border-r-[1px] border-outline-gray-1 transition-all\"\n                :class=\"[\n                  idx === 0 && 'relative border-l-[1px]',\n                  config.noBorder &&\n                    idx === weeklyDates.length - 1 &&\n                    'border-r-0',\n                ]\"\n                ref=\"allDayCells\"\n                :data-date-attr=\"date\"\n              >\n                <Button\n                  v-if=\"showCollapsable\"\n                  @click=\"isCollapsed = !isCollapsed\"\n                  class=\"absolute -left-[42px] bottom-[4px] cursor-pointer font-bold\"\n                  :icon=\"isCollapsed ? 'chevron-down' : 'chevron-up'\"\n                  variant=\"ghost\"\n                />\n                <div class=\"w-full\" v-if=\"!isCollapsed\">\n                  <CalendarEvent\n                    v-for=\"(calendarEvent, idx) in fullDayEvents[\n                      parseDate(date)\n                    ]\"\n                    class=\"!z-1 mb-1 w-[90%] cursor-pointer\"\n                    :event=\"{ ...calendarEvent, idx }\"\n                    :key=\"calendarEvent.id\"\n                    :date=\"date\"\n                  />\n                </div>\n                <div v-else class=\"flex flex-col justify-between\">\n                  <ShowMoreCalendarEvent\n                    v-if=\"fullDayEvents[parseDate(date)]?.length > 0\"\n                    :event=\"fullDayEvents[parseDate(date)][0]\"\n                    class=\"w-[90%]\"\n                    :date=\"date\"\n                    :totalEventsCount=\"fullDayEvents[parseDate(date)].length\"\n                    @showMoreEvents=\"isCollapsed = !isCollapsed\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- time events => not full day events => overflow-scroll here -->\n          <div class=\"grid w-full grid-cols-7\">\n            <!-- 7 Columns -->\n            <div\n              v-for=\"(date, idx) in weeklyDates\"\n              class=\"relative w-full border-r-[1px] border-outline-gray-1\"\n              :class=\"[\n                idx === 0 && 'calendar-column border-l-[1px]',\n                config.noBorder &&\n                  idx == weeklyDates.length - 1 &&\n                  'border-r-0',\n              ]\"\n              :data-date-attr=\"date\"\n            >\n              <!-- Time Grid -->\n              <div\n                class=\"cell relative flex cursor-pointer text-ink-gray-8\"\n                v-for=\"(time, i) in timeArray\"\n                :key=\"time\"\n                :data-time-attr=\"time\"\n                @dblclick.prevent=\"\n                  calendarActions.handleCellDblClick($event, date, time)\n                \"\n              >\n                <div\n                  class=\"border-outline-gray-1 w-full border-b-[1px]\"\n                  :class=\"i === timeArray.length - 1 && 'border-b-0'\"\n                  :style=\"{ height: `${hourHeight}px` }\"\n                />\n              </div>\n\n              <!-- Calendar Events populations  -->\n              <CalendarEvent\n                v-for=\"(calendarEvent, idx) in timedEvents[parseDate(date)]\"\n                class=\"absolute mb-2 w-[90%] cursor-pointer\"\n                :event=\"calendarEvent\"\n                :key=\"calendarEvent.id\"\n                :date=\"date\"\n              />\n\n              <!-- Current time Marker  -->\n              <CalendarTimeMarker :date=\"date\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { ref, onMounted, watch, computed, inject } from 'vue'\nimport CalendarEvent from './CalendarEvent.vue'\nimport CalendarTimeMarker from './CalendarTimeMarker.vue'\nimport {\n  twelveHoursFormat,\n  twentyFourHoursFormat,\n  parseDateWithDay,\n  parseDate,\n} from './calendarUtils'\n\nimport { Button } from '../Button'\nimport ShowMoreCalendarEvent from './ShowMoreCalendarEvent.vue'\nimport useCalendarData from './composables/useCalendarData'\n\nconst props = defineProps({\n  events: {\n    type: Object,\n    required: true,\n  },\n  config: {\n    type: Object,\n  },\n  weeklyDates: {\n    type: Array,\n    required: false,\n  },\n})\n\nconst gridRef = ref(null)\nconst allDayCells = ref(null)\nconst showCollapsable = ref(false)\nconst isCollapsed = ref(false)\n\nconst hourHeight = props.config.hourHeight\nconst minuteHeight = hourHeight / 60\n\nconst timeArray =\n  props.config.timeFormat == '24h' ? twentyFourHoursFormat : twelveHoursFormat\n\nconst timedEvents = computed(\n  () => useCalendarData(props.events).timedEvents.value,\n)\nconst fullDayEvents = computed(\n  () => useCalendarData(props.events).fullDayEvents.value,\n)\n\nconst isToday = (date) =>\n  new Date(date).toDateString() === new Date().toDateString()\n\nconst calendarActions = inject('calendarActions')\nconst redundantCellHeight = props.config.redundantCellHeight\nconst getCellHeight = (length) => redundantCellHeight + 36 * (length - 1)\nfunction getFullDayEventsInCurrentWeek(eventsObject, weeklyDates) {\n  let currentWeekEvents = {}\n  let weeklyFullDayEvents = Object.keys(eventsObject)\n  weeklyDates.forEach((date) => {\n    date = parseDate(date)\n\n    if (weeklyFullDayEvents.includes(date)) {\n      currentWeekEvents[date] = eventsObject[date]\n    }\n  })\n  return currentWeekEvents\n}\n\nfunction getFullDayEventsCount(eventsObject) {\n  let lengthArray = []\n  Object.values(eventsObject).forEach((events) => {\n    lengthArray.push(events.length)\n  })\n  let maxEventsInWeek = Math.max(...lengthArray, 1)\n  return maxEventsInWeek\n}\n\nfunction setFullDayEventsHeight(eventsObject, weeklyDates) {\n  let currentWeekEvents = getFullDayEventsInCurrentWeek(\n    eventsObject,\n    weeklyDates,\n  )\n  let maxEvents = getFullDayEventsCount(currentWeekEvents)\n  if (maxEvents > 3) {\n    showCollapsable.value = true\n  } else {\n    showCollapsable.value = false\n  }\n  let height = getCellHeight(maxEvents)\n  if (isCollapsed.value) return\n  allDayCells.value.forEach((cell) => {\n    cell.style.height = height + 'px'\n  })\n}\n\nonMounted(() => {\n  // document.body.style.overflow = 'hidden'\n  setFullDayEventsHeight(fullDayEvents.value, props.weeklyDates)\n  const currentHour = new Date().getHours()\n  gridRef.value.scrollBy(0, currentHour * 60 * minuteHeight)\n})\n\nwatch(isCollapsed, (newVal) => {\n  if (newVal) {\n    allDayCells.value.forEach((cell) => {\n      cell.style.height = '56px'\n    })\n  } else {\n    setFullDayEventsHeight(fullDayEvents.value, props.weeklyDates)\n  }\n})\n\nwatch(\n  () => fullDayEvents.value,\n  (newFullDayEvents) => {\n    setFullDayEventsHeight(newFullDayEvents, props.weeklyDates)\n  },\n)\n\nwatch(\n  () => props.weeklyDates,\n  (newWeeklyDates) => {\n    setFullDayEventsHeight(fullDayEvents.value, newWeeklyDates)\n  },\n)\n</script>\n\n<style>\n.calendar-column {\n  position: relative;\n}\n\n.calendar-column ::before {\n  content: attr(data-time-attr);\n  position: absolute;\n  left: -45px;\n  top: -9px;\n  font-size: 12px;\n  font-weight: 400;\n}\n</style>\n","<template>\n  <div class=\"h-[90%] min-h-[500px] min-w-[600px]\">\n    <slot name=\"header\" v-bind=\"{ parseDateWithDay, currentDate, fullDay }\">\n      <p class=\"pb-2 text-base font-semibold text-ink-gray-8\">\n        {{ parseDateWithDay(currentDate, (fullDay = true)) }}\n      </p>\n    </slot>\n    <div class=\"h-full overflow-hidden\">\n      <div\n        class=\"flex h-full w-full overflow-scroll border-outline-gray-1\"\n        :class=\"[\n          config.noBorder ? 'border-t-[1px]' : 'border-[1px] border-r-0',\n        ]\"\n        ref=\"gridRef\"\n      >\n        <!-- Left column -->\n        <div class=\"grid h-full w-16 grid-cols-1\">\n          <span\n            v-for=\"time in 24\"\n            class=\"flex h-[72px] items-end justify-center text-center text-sm font-normal text-ink-gray-5\"\n            :style=\"{ height: `${hourHeight}px` }\"\n          />\n        </div>\n\n        <!-- Calendar Grid / Right Column -->\n        <div class=\"grid h-full w-full grid-cols-1 pb-2\">\n          <div\n            class=\"calendar-column relative border-r-[1px] border-l-[1px] border-outline-gray-1\"\n          >\n            <!-- Top Redundant Cell before time starts for giving the calendar some space -->\n            <div\n              class=\"flex h-[50px] w-full flex-wrap gap-2 overflow-y-scroll border-b-[1px] border-outline-gray-1 transition-all\"\n              :style=\"{ height: `${config.redundantCellHeight}px` }\"\n            >\n              <CalendarEvent\n                v-for=\"(calendarEvent, idx) in fullDayEvents[\n                  parseDate(currentDate)\n                ]\"\n                class=\"mb-1 w-[20%] cursor-pointer\"\n                :event=\"{ ...calendarEvent, idx }\"\n                :key=\"calendarEvent.id\"\n                :date=\"currentDate\"\n              />\n            </div>\n            <!-- Day Grid -->\n            <div\n              class=\"relative flex text-ink-gray-8\"\n              v-for=\"time in timeArray\"\n              :key=\"time\"\n              :data-time-attr=\"time\"\n              @dblclick=\"\n                calendarActions.handleCellDblClick($event, currentDate, time)\n              \"\n            >\n              <div\n                class=\"w-full border-b-[1px] border-outline-gray-1\"\n                :style=\"{ height: `${hourHeight}px` }\"\n              />\n            </div>\n            <CalendarEvent\n              v-for=\"(calendarEvent, idx) in timedEvents[\n                parseDate(currentDate)\n              ]\"\n              class=\"absolute mb-2 cursor-pointer\"\n              :event=\"calendarEvent\"\n              :key=\"calendarEvent.id\"\n              :date=\"currentDate\"\n            />\n            <!-- Current time Marker -->\n            <CalendarTimeMarker\n              :date=\"currentDate\"\n              :redundantCellHeight=\"config.redundantCellHeight\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, inject, onMounted, ref } from 'vue'\nimport CalendarEvent from './CalendarEvent.vue'\nimport CalendarTimeMarker from './CalendarTimeMarker.vue'\nimport {\n  parseDate,\n  parseDateWithDay,\n  twelveHoursFormat,\n  twentyFourHoursFormat,\n} from './calendarUtils'\nimport useCalendarData from './composables/useCalendarData'\n\nconst props = defineProps({\n  events: {\n    type: Object,\n    required: false,\n  },\n  config: {\n    type: Object,\n  },\n  currentDate: {\n    type: Object,\n    required: true,\n  },\n})\nconst timedEvents = computed(\n  () => useCalendarData(props.events).timedEvents.value,\n)\nconst fullDayEvents = computed(\n  () => useCalendarData(props.events).fullDayEvents.value,\n)\nconst gridRef = ref(null)\nconst hourHeight = props.config.hourHeight\nconst minuteHeight = hourHeight / 60\n\nconst timeArray =\n  props.config.timeFormat == '24h' ? twentyFourHoursFormat : twelveHoursFormat\n\nonMounted(() => {\n  const currentHour = new Date().getHours()\n  gridRef.value.scrollBy(0, currentHour * 60 * minuteHeight)\n})\n\nconst calendarActions = inject('calendarActions')\n</script>\n","import { ref, reactive } from 'vue'\nimport {\n  parseDate,\n  convertMinutesToHours,\n  calculateMinutes,\n} from '../calendarUtils'\n\nexport default function useEventModal() {\n  const showEventModal = ref(false)\n  const newEvent = reactive({\n    date: '',\n    participant: '',\n    from_time: '',\n    to_time: '',\n    venue: '',\n    title: '',\n  })\n  function openNewEventModal(e, view, date, isEditMode, from_time = '') {\n    if (!isEditMode) return\n    date =\n      view === 'Week'\n        ? e.target.parentNode.parentNode.getAttribute('data-date-attr')\n        : date\n    newEvent.date = parseDate(new Date(date))\n    if (view === 'Month') {\n      showEventModal.value = true\n      return\n    }\n\n    let to_time = convertMinutesToHours(calculateMinutes(from_time) + 60).slice(\n      0,\n      -3,\n    )\n\n    newEvent.from_time = from_time\n    newEvent.to_time = to_time\n    showEventModal.value = true\n  }\n\n  return { showEventModal, newEvent, openNewEventModal }\n}\n","<template>\n  <div class=\"flex h-full flex-col overflow-hidden\">\n    <slot\n      name=\"header\"\n      v-bind=\"{\n        currentMonthYear,\n        enabledModes,\n        activeView,\n        decrement,\n        increment,\n        updateActiveView,\n      }\"\n    >\n      <div class=\"mb-2 flex justify-between\">\n        <!-- left side  -->\n        <!-- Year, Month -->\n        <span class=\"text-lg font-medium text-ink-gray-8\">\n          {{ currentMonthYear }}\n        </span>\n        <!-- right side -->\n        <!-- actions buttons for calendar -->\n        <div class=\"flex gap-x-1\">\n          <!-- Increment and Decrement Button-->\n\n          <Button\n            @click=\"decrement()\"\n            variant=\"ghost\"\n            class=\"h-4 w-4\"\n            icon=\"chevron-left\"\n          />\n          <Button\n            @click=\"increment()\"\n            variant=\"ghost\"\n            class=\"h-4 w-4\"\n            icon=\"chevron-right\"\n          />\n\n          <!--  View change button, default is months or can be set via props!  -->\n          <TabButtons\n            :buttons=\"enabledModes\"\n            class=\"ml-2\"\n            v-model=\"activeView\"\n          />\n        </div>\n      </div>\n    </slot>\n\n    <CalendarMonthly\n      v-if=\"activeView === 'Month'\"\n      :events=\"events\"\n      :currentMonth=\"currentMonth\"\n      :currentMonthDates=\"currentMonthDates\"\n      :config=\"overrideConfig\"\n      @setCurrentDate=\"(d) => updateCurrentDate(d)\"\n    />\n\n    <CalendarWeekly\n      v-else-if=\"activeView === 'Week'\"\n      :events=\"events\"\n      :weeklyDates=\"datesInWeeks[week]\"\n      :config=\"overrideConfig\"\n    />\n\n    <CalendarDaily\n      v-else-if=\"activeView === 'Day'\"\n      :events=\"events\"\n      :current-date=\"selectedDay\"\n      :config=\"overrideConfig\"\n    >\n      <template #header=\"{ parseDateWithDay, currentDate, fullDay }\">\n        <slot\n          name=\"daily-header\"\n          v-bind=\"{ parseDateWithDay, currentDate, fullDay }\"\n        />\n      </template>\n    </CalendarDaily>\n\n    <NewEventModal\n      v-if=\"showEventModal\"\n      v-model=\"showEventModal\"\n      :event=\"newEvent\"\n    />\n  </div>\n</template>\n<script setup>\nimport { computed, onMounted, onUnmounted, provide, ref } from 'vue'\nimport { Button } from '../Button'\nimport TabButtons from '../TabButtons.vue'\nimport {\n  getCalendarDates,\n  monthList,\n  handleSeconds,\n  parseDate,\n} from './calendarUtils'\nimport CalendarMonthly from './CalendarMonthly.vue'\nimport CalendarWeekly from './CalendarWeekly.vue'\nimport CalendarDaily from './CalendarDaily.vue'\nimport NewEventModal from './NewEventModal.vue'\nimport useEventModal from './composables/useEventModal'\n\nconst props = defineProps({\n  events: {\n    type: Object,\n    required: false,\n    default: [],\n  },\n  config: {\n    type: Object,\n  },\n  onClick: {\n    type: Function,\n    required: false,\n  },\n  onDblClick: {\n    type: Function,\n    required: false,\n  },\n  onCellDblClick: {\n    type: Function,\n    required: false,\n  },\n})\n\nconst emit = defineEmits(['create', 'update', 'delete'])\n\nconst defaultConfig = {\n  scrollToHour: 15,\n  disableModes: [],\n  defaultMode: 'Month',\n  isEditMode: false,\n  eventIcons: {},\n  redundantCellHeight: 50,\n  hourHeight: 50,\n  enableShortcuts: true,\n  showIcon: true,\n  timeFormat: '12h',\n}\n\nconst overrideConfig = { ...defaultConfig, ...props.config }\nlet activeView = ref(overrideConfig.defaultMode)\n\nfunction updateActiveView(value) {\n  console.log(value)\n  activeView.value = value\n}\n\n// shortcuts for changing the active view and navigating through the calendar\nonMounted(() => {\n  if (!overrideConfig.enableShortcuts) return\n  window.addEventListener('keydown', handleShortcuts)\n})\nonUnmounted(() => {\n  window.removeEventListener('keydown', handleShortcuts)\n})\nfunction handleShortcuts(e) {\n  if (e.key === 'm' || e.key === 'M') {\n    activeView.value = 'Month'\n  }\n  if (e.key === 'w' || e.key === 'W') {\n    activeView.value = 'Week'\n  }\n  if (e.key === 'd' || e.key === 'D') {\n    activeView.value = 'Day'\n  }\n  if (e.key === 'ArrowLeft') {\n    decrement()\n  }\n  if (e.key === 'ArrowRight') {\n    increment()\n  }\n}\n\nprovide('activeView', activeView)\nprovide('config', overrideConfig)\n\nconst parseEvents = computed(() => {\n  return (\n    props.events?.map((event) => {\n      const { fromDate, toDate, ...rest } = event\n      const date = parseDate(fromDate)\n      const from_time = new Date(fromDate).toLocaleTimeString()\n      const to_time = new Date(toDate).toLocaleTimeString()\n      if (event.isFullDay) {\n        return { ...rest, date }\n      }\n      return { ...rest, date, from_time, to_time }\n    }) || []\n  )\n})\nconst events = ref(parseEvents.value)\n\nfunction reloadEvents() {\n  events.value = parseEvents.value\n}\n\nevents.value.forEach((event) => {\n  if (!event.from_time || !event.to_time) {\n    return\n  }\n  event.from_time = handleSeconds(event.from_time)\n  event.to_time = handleSeconds(event.to_time)\n})\n\nconst { showEventModal, newEvent, openNewEventModal } = useEventModal()\n\nprovide('calendarActions', {\n  createNewEvent,\n  updateEventState,\n  deleteEvent,\n  handleCellDblClick,\n  props,\n})\n\n// CRUD actions on an event\nfunction createNewEvent(event) {\n  events.value.push(event)\n  event.fromDate = event.date + ' ' + event.from_time\n  event.toDate = event.date + ' ' + event.to_time\n  emit('create', event)\n}\n\nfunction updateEventState(event) {\n  const eventID = event.id\n  let eventIndex = events.value.findIndex((e) => e.id === eventID)\n  event.fromDate = event.date + ' ' + event.from_time\n  event.toDate = event.date + ' ' + event.to_time\n  events.value[eventIndex] = event\n  emit('update', event)\n}\n\nfunction deleteEvent(eventID) {\n  // Delete event\n  const eventIndex = events.value.findIndex((event) => event.id === eventID)\n  events.value.splice(eventIndex, 1)\n  emit('delete', eventID)\n}\n\nfunction openModal(data) {\n  const { e, view, date, time } = data\n  const config = overrideConfig.isEditMode\n  openNewEventModal(e, view, date, config, time)\n}\n\nfunction handleCellDblClick(e, date, time = '') {\n  const data = {\n    e,\n    view: activeView.value,\n    date,\n    time,\n  }\n\n  if (props.onCellDblClick) {\n    props.onCellDblClick(data)\n    return\n  }\n  openModal(data)\n}\n\n// Calendar View Options\nconst actionOptions = [\n  { label: 'Day', variant: 'solid' },\n  { label: 'Week', variant: 'solid' },\n  { label: 'Month', variant: 'solid' },\n]\nlet enabledModes = actionOptions.filter(\n  (mode) => !overrideConfig.disableModes.includes(mode.label),\n)\n\nlet currentYear = ref(new Date().getFullYear())\nlet currentMonth = ref(new Date().getMonth())\nlet currentDate = ref(new Date())\n\nlet currentMonthDates = computed(() => {\n  let dates = getCalendarDates(currentMonth.value, currentYear.value)\n  return dates\n})\n\nlet datesInWeeks = computed(() => {\n  let dates = [...currentMonthDates.value]\n  let datesInWeeks = []\n  while (dates.length) {\n    let week = dates.splice(0, 7)\n    datesInWeeks.push(week)\n  }\n  return datesInWeeks\n})\n\nfunction findCurrentWeek(date) {\n  return datesInWeeks.value.findIndex((week) =>\n    week.find(\n      (d) =>\n        new Date(d).toLocaleDateString().split('T')[0] ===\n        new Date(date).toLocaleDateString().split('T')[0],\n    ),\n  )\n}\n\nlet week = ref(findCurrentWeek(currentDate.value))\n\nlet date = ref(\n  currentMonthDates.value.findIndex(\n    (d) => new Date(d).toDateString() === currentDate.value.toDateString(),\n  ),\n)\nlet selectedDay = computed(() => currentMonthDates.value[date.value])\n\nfunction updateCurrentDate(d) {\n  activeView.value = 'Day'\n  date.value = findIndexOfDate(d)\n  week.value = findCurrentWeek(d)\n}\n\nconst incrementClickEvents = {\n  Month: incrementMonth,\n  Week: incrementWeek,\n  Day: incrementDay,\n}\n\nconst decrementClickEvents = {\n  Month: decrementMonth,\n  Week: decrementWeek,\n  Day: decrementDay,\n}\n\nfunction incrementMonth() {\n  currentMonth.value++\n  date.value = findFirstDateOfMonth(currentMonth.value, currentYear.value)\n  week.value = findCurrentWeek(currentMonthDates.value[date.value]) + 1\n  if (currentMonth.value > 11) {\n    currentMonth.value = 0\n    currentYear.value++\n  }\n}\n\nfunction decrementMonth() {\n  currentMonth.value--\n  date.value = findLastDateOfMonth(currentMonth.value, currentYear.value)\n  week.value = findCurrentWeek(currentMonthDates.value[date.value])\n  if (currentMonth.value < 0) {\n    currentMonth.value = 11\n    currentYear.value--\n  }\n}\n\nfunction increment() {\n  incrementClickEvents[activeView.value]()\n}\n\nfunction decrement() {\n  decrementClickEvents[activeView.value]()\n}\n\nfunction incrementWeek() {\n  week.value += 1\n  if (week.value < datesInWeeks.value.length) {\n    date.value = findIndexOfDate(datesInWeeks.value[week.value][0])\n  }\n  if (week.value > datesInWeeks.value.length - 1) {\n    incrementMonth()\n  }\n  let nextMonthDates = filterCurrentWeekDates()\n  if (nextMonthDates.length > 0) {\n    incrementMonth()\n    week.value = findCurrentWeek(nextMonthDates[0])\n  }\n}\n\nfunction decrementWeek() {\n  week.value -= 1\n  if (week.value < 0) {\n    decrementMonth()\n    return\n  }\n\n  if (week.value > 0) {\n    date.value = findIndexOfDate(datesInWeeks.value[week.value][0])\n  }\n\n  let previousMonthDates = filterCurrentWeekDates()\n  if (previousMonthDates.length > 0) {\n    decrementMonth()\n    week.value = findCurrentWeek(previousMonthDates[0])\n  }\n}\n\nfunction filterCurrentWeekDates() {\n  let currentWeekDates = datesInWeeks.value[week.value]\n  let differentMonthDates = currentWeekDates.filter(\n    (d) => d.getMonth() !== currentMonth.value,\n  )\n  return differentMonthDates\n}\n\nfunction incrementDay() {\n  date.value++\n  if (\n    date.value > currentMonthDates.value.length - 1 ||\n    !isCurrentMonthDate(currentMonthDates.value[date.value])\n  ) {\n    incrementMonth()\n  }\n}\n\nfunction decrementDay() {\n  date.value--\n  if (\n    date.value < 0 ||\n    !isCurrentMonthDate(currentMonthDates.value[date.value])\n  ) {\n    decrementMonth()\n  }\n}\n\nfunction findLastDateOfMonth(month, year) {\n  let inputDate = new Date(year, month + 1, 0)\n  let lastDateIndex = currentMonthDates.value.findIndex(\n    (date) => new Date(date).toDateString() === inputDate.toDateString(),\n  )\n  return lastDateIndex\n}\n\nfunction findFirstDateOfMonth(month, year) {\n  let inputDate = new Date(year, month, 1)\n  let firstDateIndex = currentMonthDates.value.findIndex(\n    (date) => new Date(date).toDateString() === inputDate.toDateString(),\n  )\n  return firstDateIndex\n}\n\nfunction findIndexOfDate(date) {\n  return currentMonthDates.value.findIndex(\n    (d) => new Date(d).toDateString() === new Date(date).toDateString(),\n  )\n}\nconst currentMonthYear = computed(() => {\n  return monthList[currentMonth.value] + ', ' + currentYear.value\n})\n\nfunction isCurrentMonthDate(date) {\n  date = new Date(date)\n  return date.getMonth() === currentMonth.value\n}\n\ndefineExpose({ reloadEvents })\n</script>\n","<template>\n\t<div class=\"space-y-1\">\n\t\t<label class=\"block text-xs text-ink-gray-5\" v-if=\"props.label\">\n\t\t\t{{ props.label }}\n\t\t</label>\n\t\t<div class=\"flex text-center\">\n\t\t\t<div\n\t\t\t\tv-for=\"index in 5\"\n\t\t\t\t@mouseover=\"hoveredRating = index\"\n\t\t\t\t@mouseleave=\"hoveredRating = 0\"\n\t\t\t>\n\t\t\t\t<Star\n\t\t\t\t\tclass=\"fill-gray-400 text-gray-50 stroke-1 mr-1 cursor-pointer\"\n\t\t\t\t\t:class=\"iconClasses(index)\"\n\t\t\t\t\t@click=\"markRating(index)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { Star } from 'lucide-vue-next'\nimport { ref, watch } from 'vue'\n\nconst props = defineProps({\n\tid: {\n\t\ttype: String,\n\t\tdefault: '',\n\t},\n\tmodelValue: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t},\n\tlabel: {\n\t\ttype: String,\n\t\tdefault: '',\n\t},\n\tsize: {\n\t\ttype: String,\n\t\tdefault: 'md',\n\t},\n})\n\nconst iconClasses = (index) => {\n\tlet classes = [\n\t\t{\n\t\t\tsm: 'size-4',\n\t\t\tmd: 'size-5',\n\t\t\tlg: 'size-6',\n\t\t\txl: 'size-7',\n\t\t}[props.size],\n\t]\n\tif (index <= hoveredRating.value && index > rating.value) {\n\t\tclasses.push('fill-yellow-200')\n\t} else if (index <= rating.value) {\n\t\tclasses.push('fill-yellow-500')\n\t}\n\treturn classes.join(' ')\n}\n\nconst emit = defineEmits(['update:modelValue'])\nconst rating = ref(props.modelValue)\nconst hoveredRating = ref(0)\n\nlet emitChange = (value) => {\n\temit('update:modelValue', value)\n}\n\nfunction markRating(index) {\n\temitChange(index)\n\trating.value = index\n}\n\nwatch(\n\t() => props.modelValue,\n\t(newVal) => {\n\t\trating.value = newVal\n\t}\n)\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\tsize: '2xl',\n\t\t}\"\n\t>\n\t\t<template #body>\n\t\t\t<div class=\"flex text-base\">\n\t\t\t\t<div class=\"flex flex-col w-1/2 p-5\">\n\t\t\t\t\t<div class=\"text-lg font-semibold mb-4\">\n\t\t\t\t\t\t{{ event.title }}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex flex-col space-y-4 text-sm text-ink-gray-8\">\n\t\t\t\t\t\t<Tooltip :text=\"__('Email ID')\">\n\t\t\t\t\t\t\t<div class=\"flex items-center space-x-2 w-fit\">\n\t\t\t\t\t\t\t\t<User class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ event.member }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip :text=\"__('Course')\">\n\t\t\t\t\t\t\t<div class=\"flex items-center space-x-2 w-fit\">\n\t\t\t\t\t\t\t\t<BookOpen class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ event.course_title }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip v-if=\"event.batch_title\" :text=\"__('Batch')\">\n\t\t\t\t\t\t\t<div class=\"flex items-center space-x-2 w-fit\">\n\t\t\t\t\t\t\t\t<Users class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ event.batch_title }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip :text=\"__('Date')\">\n\t\t\t\t\t\t\t<div class=\"flex items-center space-x-2 w-fit\">\n\t\t\t\t\t\t\t\t<Calendar class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ dayjs(event.date).format('DD MMM YYYY') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip :text=\"__('Time')\">\n\t\t\t\t\t\t\t<div class=\"flex items-center space-x-2 w-fit\">\n\t\t\t\t\t\t\t\t<Clock class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ formatTime(event.start_time) }} -\n\t\t\t\t\t\t\t\t\t{{ formatTime(event.end_time) }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex items-center space-x-2 mt-auto\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tv-if=\"certificate.name\"\n\t\t\t\t\t\t\t@click=\"openCertificate(certificate)\"\n\t\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<FileText class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ __('View Certificate') }}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button v-else @click=\"openCallLink(event.venue)\" class=\"w-full\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<Video class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ __('Join Meeting') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Tabs :tabs=\"tabs\" v-model=\"tabIndex\" class=\"border-l w-1/2\">\n\t\t\t\t\t<template #default=\"{ tab }\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"tab.label == 'Evaluation'\"\n\t\t\t\t\t\t\tclass=\"flex flex-col space-y-4 p-5\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<Rating v-model=\"evaluation.rating\" :label=\"__('Rating')\" />\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t\t\t:options=\"statusOptions\"\n\t\t\t\t\t\t\t\t\tv-model=\"evaluation.status\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Status')\"\n\t\t\t\t\t\t\t\t\tclass=\"w-1/2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\tv-model=\"evaluation.summary\"\n\t\t\t\t\t\t\t\t:label=\"__('Summary')\"\n\t\t\t\t\t\t\t\t:rows=\"7\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button variant=\"solid\" @click=\"saveEvaluation()\">\n\t\t\t\t\t\t\t\t{{ __('Save') }}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else class=\"flex flex-col space-y-4 p-5\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tv-model=\"certificate.published\"\n\t\t\t\t\t\t\t\t:label=\"__('Published')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tv-model=\"certificate.template\"\n\t\t\t\t\t\t\t\t:label=\"__('Template')\"\n\t\t\t\t\t\t\t\tdoctype=\"Print Format\"\n\t\t\t\t\t\t\t\t:filters=\"{\n\t\t\t\t\t\t\t\t\tdoc_type: 'LMS Certificate',\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\tv-model=\"certificate.issue_date\"\n\t\t\t\t\t\t\t\t:label=\"__('Issue Date')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\tv-model=\"certificate.expiry_date\"\n\t\t\t\t\t\t\t\t:label=\"__('Expiry Date')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button variant=\"solid\" @click=\"saveCertificate()\">\n\t\t\t\t\t\t\t\t{{ __('Save') }}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</Tabs>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport {\n\tDialog,\n\tButton,\n\tFormControl,\n\tcreateResource,\n\tTabs,\n\tTooltip,\n\tTextarea,\n\ttoast,\n} from 'frappe-ui'\nimport {\n\tUser,\n\tCalendar,\n\tClock,\n\tVideo,\n\tBookOpen,\n\tFileText,\n\tGraduationCap,\n\tUsers,\n\tClipboardList,\n} from 'lucide-vue-next'\nimport { inject, reactive, watch, ref, computed } from 'vue'\nimport { formatTime } from '@/utils'\nimport Rating from '@/components/Controls/Rating.vue'\nimport Link from '@/components/Controls/Link.vue'\n\nconst show = defineModel()\nconst dayjs = inject('$dayjs')\nconst tabIndex = ref(0)\nconst showCertification = ref(false)\n\nconst props = defineProps({\n\tevent: {\n\t\ttype: [Object, null],\n\t\trequired: true,\n\t},\n})\n\nconst evaluation = reactive({})\n\nconst certificate = reactive({})\n\nconst defaultTemplate = createResource({\n\turl: 'frappe.client.get_value',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'Property Setter',\n\t\t\tfieldname: 'value',\n\t\t\tfilters: {\n\t\t\t\tdoc_type: 'LMS Certificate',\n\t\t\t\tproperty: 'default_print_format',\n\t\t\t},\n\t\t}\n\t},\n\tauto: true,\n\tonSuccess(data) {\n\t\tcertificate.template = data.value\n\t},\n})\n\nconst openCallLink = (link) => {\n\twindow.open(link, '_blank')\n}\n\nconst evaluationResource = createResource({\n\turl: 'lms.lms.api.save_evaluation_details',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tmember: props.event.member,\n\t\t\tcourse: props.event.course,\n\t\t\tbatch_name: props.event.batch_name,\n\t\t\tdate: props.event.date,\n\t\t\tstart_time: props.event.start_time,\n\t\t\tend_time: props.event.end_time,\n\t\t\tstatus: evaluation.status,\n\t\t\trating: evaluation.rating,\n\t\t\tsummary: evaluation.summary,\n\t\t\tevaluator: props.event.evaluator,\n\t\t}\n\t},\n\tauto: false,\n\tonSuccess(data) {\n\t\tevaluation.name = data.name\n\t},\n})\n\nconst evaluationDetails = createResource({\n\turl: 'frappe.client.get',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'LMS Certificate Evaluation',\n\t\t\tfilters: {\n\t\t\t\tmember: props.event.member,\n\t\t\t\tcourse: props.event.course,\n\t\t\t},\n\t\t}\n\t},\n\tonSuccess(data) {\n\t\tfor (const key in data) {\n\t\t\tif (key in evaluation) evaluation[key] = data[key]\n\t\t\tif (key == 'rating') evaluation.rating = data.rating * 5\n\t\t\tif (evaluation.status == 'Pass') showCertification.value = true\n\t\t}\n\t},\n\tauto: false,\n})\n\nconst saveEvaluation = () => {\n\tevaluationResource.submit(\n\t\t{},\n\t\t{\n\t\t\tonSuccess: () => {\n\t\t\t\tif (evaluation.status == 'Pass') {\n\t\t\t\t\tshowCertification.value = true\n\t\t\t\t} else {\n\t\t\t\t\tshow.value = false\n\t\t\t\t}\n\t\t\t\ttoast.success(__('Evaluation saved successfully'))\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst certificateResource = createResource({\n\turl: 'lms.lms.api.save_certificate_details',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tmember: props.event.member,\n\t\t\tcourse: props.event.course,\n\t\t\tbatch_name: props.event.batch_name,\n\t\t\tpublished: certificate.published,\n\t\t\tissue_date: certificate.issue_date,\n\t\t\texpiry_date: certificate.expiry_date,\n\t\t\ttemplate: certificate.template,\n\t\t\tevaluator: props.event.evaluator,\n\t\t}\n\t},\n\tauto: false,\n\tonSuccess(data) {\n\t\tcertificate.name = data\n\t},\n})\n\nconst certificateDetails = createResource({\n\turl: 'frappe.client.get',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'LMS Certificate',\n\t\t\tfilters: {\n\t\t\t\tmember: props.event.member,\n\t\t\t\tcourse: props.event.course,\n\t\t\t},\n\t\t}\n\t},\n\tonSuccess(data) {\n\t\tfor (const key in data) {\n\t\t\tif (key in certificate) certificate[key] = data[key]\n\t\t\tcertificate.name = data.name\n\t\t\tshowCertification.value = true\n\t\t}\n\t},\n\tonError(err) {\n\t\tcertificate.template = defaultTemplate.data.value\n\t},\n\tauto: false,\n})\n\nconst saveCertificate = () => {\n\tcertificateResource.submit(\n\t\t{},\n\t\t{\n\t\t\tonSuccess: () => {\n\t\t\t\ttoast.success(__('Certificate saved successfully'))\n\t\t\t},\n\t\t}\n\t)\n}\n\nwatch(show, () => {\n\tif (show.value) {\n\t\tevaluation.rating = 0\n\t\tevaluation.status = 'Pending'\n\t\tevaluation.summary = ''\n\t\tevaluationDetails.reload()\n\n\t\tcertificate.published = true\n\t\tcertificate.issue_date = dayjs().format('YYYY-MM-DD')\n\t\tcertificate.expiry_date = null\n\t\tcertificate.template = null\n\t\tcertificate.name = null\n\t\tcertificateDetails.reload()\n\t}\n})\n\nconst openCertificate = (certificate) => {\n\twindow.open(\n\t\t`/api/method/frappe.utils.print_format.download_pdf?doctype=LMS+Certificate&name=${\n\t\t\tcertificate.name\n\t\t}&format=${encodeURIComponent(certificate.template)}`\n\t)\n}\n\nconst statusOptions = computed(() => {\n\treturn [\n\t\t{\n\t\t\tvalue: 'Pending',\n\t\t\tlabel: __('Pending'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'In Progress',\n\t\t\tlabel: __('In Progress'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'Pass',\n\t\t\tlabel: __('Pass'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'Fail',\n\t\t\tlabel: __('Fail'),\n\t\t},\n\t]\n})\n\nconst tabs = computed(() => {\n\tconst tabsArray = [\n\t\t{\n\t\t\tlabel: __('Evaluation'),\n\t\t\ticon: ClipboardList,\n\t\t},\n\t]\n\n\tif (showCertification.value) {\n\t\ttabsArray.push({\n\t\t\tlabel: __('Certification'),\n\t\t\ticon: GraduationCap,\n\t\t})\n\t}\n\n\treturn tabsArray\n})\n</script>\n","<template>\n\t<div class=\"mt-7 mb-20\">\n\t\t<div class=\"flex h-screen flex-col overflow-hidden\">\n\t\t\t<Calendar\n\t\t\t\tv-if=\"evaluations.data?.length\"\n\t\t\t\t:config=\"{\n\t\t\t\t\tdefaultMode: 'Month',\n\t\t\t\t\tdisableModes: ['Day', 'Week'],\n\t\t\t\t\tredundantCellHeight: 100,\n\t\t\t\t\tenableShortcuts: false,\n\t\t\t\t}\"\n\t\t\t\t:events=\"evaluations.data\"\n\t\t\t\t@click=\"(event) => openEvent(event)\"\n\t\t\t>\n\t\t\t\t<template #header=\"{ currentMonthYear, decrement, increment }\">\n\t\t\t\t\t<div class=\"mb-2 flex justify-between\">\n\t\t\t\t\t\t<span class=\"text-lg text-ink-gray-9 font-semibold\">\n\t\t\t\t\t\t\t{{ currentMonthYear }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"flex gap-x-1\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t@click=\"decrement()\"\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4\"\n\t\t\t\t\t\t\t\ticon=\"chevron-left\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t@click=\"increment()\"\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4\"\n\t\t\t\t\t\t\t\ticon=\"chevron-right\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</Calendar>\n\t\t</div>\n\t</div>\n\t<Event v-model=\"showEvent\" :event=\"currentEvent\" />\n</template>\n<script setup>\nimport { Calendar, createListResource, Button } from 'frappe-ui'\nimport { inject, ref } from 'vue'\nimport Event from '@/components/Modals/Event.vue'\n\nconst user = inject('$user')\nconst currentEvent = ref(null)\nconst showEvent = ref(false)\n\nconst props = defineProps({\n\tprofile: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n})\n\nconst evaluations = createListResource({\n\tdoctype: 'LMS Certificate Request',\n\tfilters: {\n\t\tevaluator: user.data?.name,\n\t},\n\tfields: [\n\t\t'name',\n\t\t'member_name',\n\t\t'member',\n\t\t'course',\n\t\t'course_title',\n\t\t'batch_name',\n\t\t'batch_title',\n\t\t'evaluator',\n\t\t'evaluator_name',\n\t\t'date',\n\t\t'start_time',\n\t\t'end_time',\n\t\t'google_meet_link',\n\t],\n\tauto: true,\n\torderBy: 'creation desc',\n\tlimit: 100,\n\tcache: ['schedule', user.data?.name],\n\ttransform(data) {\n\t\treturn data.map((d) => {\n\t\t\tlet mappedData = Object.assign({}, d)\n\n\t\t\tmappedData.title = `${d.member_name}'s Evaluation`\n\t\t\tmappedData.participant = d.member_name\n\t\t\tmappedData.id = d.name\n\t\t\tmappedData.venue = d.google_meet_link\n\t\t\tmappedData.fromDate = `${d.date} ${d.start_time}`\n\t\t\tmappedData.toDate = `${d.date} ${d.end_time}`\n\t\t\tmappedData.color = 'green'\n\n\t\t\treturn mappedData\n\t\t})\n\t},\n})\n\nconst openEvent = (event) => {\n\tcurrentEvent.value = event.calendarEvent\n\tshowEvent.value = true\n}\n</script>\n"],"names":["getCalendarDates","month","year","daysInMonth","firstDay","leftPadding","datesInPreviousMonth","getBeforeDates","datesInCurrentMonth","getCurrentMonthDates","datesTillNow","datesInNextMonth","getNextMonthDates","date","isLeapYear","numberOfDays","getDatesAfter","allDates","currentAndPreviousMonthDates","numberofDaysInCalendar","lengthOfDates","lastDate","diff","startIndex","counter","stepper","index","tempDate","groupBy","obj","fn","acc","key","group","calculateMinutes","time","hours","minutes","convertMinutesToHours","remainingMinutes","parseDate","dd","mm","yyyy","parseDateEventPopupFormat","showDay","showMonth","weekDay","options","parseDateWithDay","fullDay","daysListFull","daysList","calculateDiff","from","to","fromMinutes","handleSeconds","findOverlappingEventsCount","events","a","b","result","event","availableHall","hall","idx","eventIdx","monthList","twelveHoursFormat","twentyFourHoursFormat","colorMap","formattedDuration","from_time","to_time","timeFormat","formatTime","format","ampm","show","ref","props","__props","newEvent","reactive","_a","_b","_c","_d","_e","_f","_g","_h","isUpdated","computed","colors","errorMessage","validateFields","validateStartEndTime","calendarActions","inject","submitEvent","close","handleEventTime","id","heightThreshold","minimumHeight","activeView","config","onMounted","handleClickOutside","onBeforeUnmount","e","floating","eventRef","calendarEvent","updatedEvent","watch","newVal","eventIcons","minuteHeight","height_15_min","state","setEventStyles","isRepositioning","height","top","hallNumber","width","isResizing","left","zIndex","border","floatingStyles","useFloating","offset","flip","shift","autoUpdate","opened","resize","isEventUpdated","newEventEndTime","newHeight","newEndTime","preventClick","handleResizeMouseDown","oldTime","stopResize","diffX","handleRepositionMouseDown","prevY","rect","mousemove","mouseup","handleHorizontalMovement","handleVerticalMovement","getDate","nextDate","clientX","currentDate","eventWidth","leftBoundary","rightBoundary","handleHorizontalBoundary","xPos","clientY","diffY","parentTop","parentBottom","handleTimeConstraints","toggle","handleDeleteShortcut","handleEventDelete","clickTimer","handleEventClick","showEventModal","handleEventEdit","useCalendarData","view","timedEvents","groupByDate","row","sortedArray","value","sortMonthlyEvents","task","sortedEvents","fullDayEvents","emit","__emit","maxEventsInCell","currentMonthDate","onDragStart","calendarEventID","onDrop","setCurrentTime","d","hour","gridRef","allDayCells","showCollapsable","isCollapsed","hourHeight","timeArray","isToday","redundantCellHeight","getCellHeight","length","getFullDayEventsInCurrentWeek","eventsObject","weeklyDates","currentWeekEvents","weeklyFullDayEvents","getFullDayEventsCount","lengthArray","setFullDayEventsHeight","maxEvents","cell","currentHour","newFullDayEvents","newWeeklyDates","useEventModal","openNewEventModal","isEditMode","overrideConfig","updateActiveView","handleShortcuts","onUnmounted","decrement","increment","provide","parseEvents","fromDate","toDate","rest","reloadEvents","createNewEvent","updateEventState","deleteEvent","handleCellDblClick","eventID","eventIndex","openModal","data","enabledModes","mode","currentYear","currentMonth","currentMonthDates","datesInWeeks","dates","week","findCurrentWeek","selectedDay","updateCurrentDate","findIndexOfDate","incrementClickEvents","incrementMonth","incrementWeek","incrementDay","decrementClickEvents","decrementMonth","decrementWeek","decrementDay","findFirstDateOfMonth","findLastDateOfMonth","nextMonthDates","filterCurrentWeekDates","previousMonthDates","isCurrentMonthDate","inputDate","currentMonthYear","__expose","iconClasses","classes","hoveredRating","rating","emitChange","markRating","_useModel","dayjs","tabIndex","showCertification","evaluation","certificate","defaultTemplate","createResource","values","openCallLink","link","evaluationResource","evaluationDetails","saveEvaluation","toast","certificateResource","certificateDetails","err","saveCertificate","openCertificate","statusOptions","tabs","tabsArray","ClipboardList","GraduationCap","user","currentEvent","showEvent","evaluations","createListResource","mappedData","openEvent"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}