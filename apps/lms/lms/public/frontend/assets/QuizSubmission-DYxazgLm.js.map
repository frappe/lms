{"version":3,"file":"QuizSubmission-DYxazgLm.js","sources":["../../../../frontend/src/pages/QuizSubmission.vue"],"sourcesContent":["<template>\n\t<header\n\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs v-if=\"submissionDetails.doc\" :items=\"breadcrumbs\" />\n\t\t<div class=\"space-x-2\">\n\t\t\t<Badge\n\t\t\t\tv-if=\"submissionDetails.isDirty\"\n\t\t\t\t:label=\"__('Not Saved')\"\n\t\t\t\tvariant=\"subtle\"\n\t\t\t\ttheme=\"orange\"\n\t\t\t/>\n\t\t\t<Button variant=\"solid\" @click=\"saveSubmission()\">\n\t\t\t\t{{ __('Save') }}\n\t\t\t</Button>\n\t\t</div>\n\t</header>\n\t<div v-if=\"submissionDetails.doc\" class=\"w-2/3 border-x mx-auto py-5\">\n\t\t<div class=\"text-xl px-10 font-semibold text-ink-gray-9 mb-5\">\n\t\t\t{{ submissionDetails.doc.member_name }}\n\t\t</div>\n\t\t<div class=\"space-y-4 border-b pb-5 px-10\">\n\t\t\t<div class=\"grid grid-cols-2 gap-5\">\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"submissionDetails.doc.quiz_title\"\n\t\t\t\t\t:label=\"__('Quiz')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"submissionDetails.doc.member_name\"\n\t\t\t\t\t:label=\"__('Member')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div class=\"grid grid-cols-2 gap-5\">\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"submissionDetails.doc.score\"\n\t\t\t\t\t:label=\"__('Score')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"submissionDetails.doc.percentage\"\n\t\t\t\t\t:label=\"__('Percentage')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"divide-y\">\n\t\t\t<div\n\t\t\t\tv-for=\"(row, index) in submissionDetails.doc.result\"\n\t\t\t\tclass=\"py-5 px-10 space-y-4\"\n\t\t\t>\n\t\t\t\t<div class=\"text-ink-gray-9\">\n\t\t\t\t\t<span class=\"font-semibold\"> {{ __('Question') }}: </span>\n\t\t\t\t\t<span class=\"leading-5\" v-html=\"row.question\"> </span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"\">\n\t\t\t\t\t<span class=\"font-semibold\"> {{ __('Answer') }} </span>\n\t\t\t\t\t<span class=\"leading-5\" v-html=\"row.answer\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"grid grid-cols-2 gap-5\">\n\t\t\t\t\t<FormControl v-model=\"row.marks\" :label=\"__('Marks')\" />\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"row.marks_out_of\"\n\t\t\t\t\t\t:label=\"__('Marks out of')\"\n\t\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tcreateDocumentResource,\n\tBreadcrumbs,\n\tFormControl,\n\tButton,\n\tBadge,\n\tusePageMeta,\n\ttoast,\n} from 'frappe-ui'\nimport { computed, onBeforeUnmount, onMounted, inject } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { sessionStore } from '@/stores/session'\n\nconst { brand } = sessionStore()\nconst router = useRouter()\nconst user = inject('$user')\n\nonMounted(() => {\n\tif (!user.data?.is_instructor && !user.data?.is_moderator)\n\t\trouter.push({ name: 'Courses' })\n\n\twindow.addEventListener('keydown', keyboardShortcut)\n})\n\nonBeforeUnmount(() => {\n\twindow.removeEventListener('keydown', keyboardShortcut)\n})\n\nconst keyboardShortcut = (e) => {\n\tif (\n\t\te.key === 's' &&\n\t\t(e.ctrlKey || e.metaKey) &&\n\t\t!e.target.classList.contains('ProseMirror')\n\t) {\n\t\tsaveSubmission()\n\t\te.preventDefault()\n\t}\n}\n\nconst props = defineProps({\n\tsubmission: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst submissionDetails = createDocumentResource({\n\tdoctype: 'LMS Quiz Submission',\n\tname: props.submission,\n\tauto: true,\n})\n\nconst breadcrumbs = computed(() => {\n\treturn [\n\t\t{\n\t\t\tlabel: __('Quiz Submissions'),\n\t\t\troute: {\n\t\t\t\tname: 'QuizSubmissionList',\n\t\t\t\tparams: {\n\t\t\t\t\tquizID: submissionDetails.doc.quiz,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: submissionDetails.doc.quiz_title,\n\t\t},\n\t]\n})\n\nconst saveSubmission = () => {\n\tsubmissionDetails.save.submit(\n\t\t{},\n\t\t{\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: `${submissionDetails.doc?.quiz_title}`,\n\t\ticon: brand.favicon,\n\t}\n})\n</script>\n"],"names":["brand","sessionStore","router","useRouter","user","inject","onMounted","_a","_b","keyboardShortcut","onBeforeUnmount","saveSubmission","submissionDetails","createDocumentResource","__props","breadcrumbs","computed","err","toast","usePageMeta"],"mappings":"o6BAwFA,KAAM,CAAE,MAAAA,CAAO,EAAGC,EAAY,EACxBC,EAASC,EAAS,EAClBC,EAAOC,EAAO,OAAO,EAE3BC,EAAU,IAAM,SACX,GAACC,EAAAH,EAAK,OAAL,MAAAG,EAAW,gBAAiB,GAACC,EAAAJ,EAAK,OAAL,MAAAI,EAAW,eAC5CN,EAAO,KAAK,CAAE,KAAM,SAAW,CAAA,EAEhC,OAAO,iBAAiB,UAAWO,CAAgB,CACpD,CAAC,EAEDC,EAAgB,IAAM,CACrB,OAAO,oBAAoB,UAAWD,CAAgB,CACvD,CAAC,EAED,MAAMA,EAAoB,GAAM,CAE9B,EAAE,MAAQ,MACT,EAAE,SAAW,EAAE,UAChB,CAAC,EAAE,OAAO,UAAU,SAAS,aAAa,IAE1CE,EAAc,EACd,EAAE,eAAc,EAElB,EASMC,EAAoBC,EAAuB,CAChD,QAAS,sBACT,KATaC,EASD,WACZ,KAAM,EACP,CAAC,EAEKC,EAAcC,EAAS,IACrB,CACN,CACC,MAAO,GAAG,kBAAkB,EAC5B,MAAO,CACN,KAAM,qBACN,OAAQ,CACP,OAAQJ,EAAkB,IAAI,IAC9B,CACD,CACD,EACD,CACC,MAAOA,EAAkB,IAAI,UAC7B,CACH,CACC,EAEKD,EAAiB,IAAM,CAC5BC,EAAkB,KAAK,OACtB,CAAE,EACF,CACC,QAAQK,EAAK,OACZC,EAAM,QAAMX,EAAAU,EAAI,WAAJ,YAAAV,EAAe,KAAMU,CAAG,CACpC,CACJ,CACA,CACA,EAEA,OAAAE,EAAY,IAAM,OACjB,MAAO,CACN,MAAO,IAAGZ,EAAAK,EAAkB,MAAlB,YAAAL,EAAuB,UAAU,GAC3C,KAAMP,EAAM,OACd,CACA,CAAC"}