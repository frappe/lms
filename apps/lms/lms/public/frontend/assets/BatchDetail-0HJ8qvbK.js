import{z as L,i as T,A as B,b as k,d as z,e as l,k as d,f as n,h as i,g as r,C as H,p as N,t as o,l as s,aa as O,D as V,a7 as j,a8 as C,a9 as E,j as _,n as b,_ as y,H as F,s as P,u as R,F as D,x as M}from"./index-D24HXhLT.js";import{_ as I}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-DRN2bHzK.js";import{_ as q}from"./CourseCard-9Y8ICiAe.js";import{_ as A}from"./DateRange-DeTK-VK6.js";import{_ as G}from"./CourseInstructors-AYbj4319.js";import{_ as Y}from"./UserAvatar-CNqvj4u9.js";import"./ProgressBar-rBBAZ6HI.js";const J={key:0,class:"border-2 rounded-md p-5 lg:w-72"},K={key:0},Q={key:1},U={key:1,class:"text-xs bg-red-100 text-red-700 float-right px-2 py-0.5 rounded-md"},W={key:2,class:"text-lg font-semibold mb-3 text-ink-gray-9"},X={key:3,class:"flex items-center mb-3 text-ink-gray-7"},Z={class:"flex items-center mb-3 text-ink-gray-7"},tt={key:4,class:"flex items-center text-ink-gray-7"},at={key:5},S={__name:"BatchOverlay",props:{batch:{type:Object,default:null}},setup(a){const p=L(),g=T("$user"),f=window.read_only_mode,t=a,w=B({url:"lms.lms.utils.enroll_in_batch",makeParams(e){return{batch:t.batch.data.name}}}),x=()=>{g.data||(window.location.href=`/login?redirect-to=/batches/details/${t.batch.data.name}`),w.submit({},{onSuccess(e){F.success(__("You have been enrolled in this batch")),p.push({name:"Batch",params:{batchName:t.batch.data.name}})}})},c=k(()=>{var e,h,u,$;return(e=t.batch.data)!=null&&e.seat_count?((h=t.batch.data)==null?void 0:h.seat_count)-(($=(u=t.batch.data)==null?void 0:u.students)==null?void 0:$.length):null}),v=k(()=>{var e,h,u;return(u=(e=t.batch.data)==null?void 0:e.students)==null?void 0:u.includes((h=g.data)==null?void 0:h.name)}),m=k(()=>{var e;return(e=g.data)==null?void 0:e.is_moderator});return(e,h)=>{const u=z("router-link");return a.batch.data?(n(),l("div",J,[a.batch.data.seat_count&&c.value>0?(n(),l("div",{key:0,class:H(["text-sm bg-green-100 text-green-700 px-2 py-1 rounded-md",a.batch.data.amount||a.batch.data.courses.length?"float-right":"w-fit mb-4"])},[N(o(c.value)+" ",1),c.value>1?(n(),l("span",K,o(e.__("Seats Left")),1)):c.value==1?(n(),l("span",Q,o(e.__("Seat Left")),1)):d("",!0)],2)):a.batch.data.seat_count&&c.value<=0?(n(),l("div",U,o(e.__("Sold Out")),1)):d("",!0),a.batch.data.amount?(n(),l("div",W,o(s(O)(a.batch.data.amount,a.batch.data.currency)),1)):d("",!0),a.batch.data.courses.length?(n(),l("div",X,[i(s(V),{class:"h-4 w-4 stroke-1.5 mr-2"}),r("span",null,o(a.batch.data.courses.length)+" "+o(e.__("Courses")),1)])):d("",!0),i(A,{startDate:a.batch.data.start_date,endDate:a.batch.data.end_date,class:"mb-3"},null,8,["startDate","endDate"]),r("div",Z,[i(s(j),{class:"h-4 w-4 stroke-1.5 mr-2"}),r("span",null,o(s(C)(a.batch.data.start_time))+" - "+o(s(C)(a.batch.data.end_time)),1)]),a.batch.data.timezone?(n(),l("div",tt,[i(s(E),{class:"h-4 w-4 stroke-1.5 mr-2"}),r("span",null,o(a.batch.data.timezone),1)])):d("",!0),s(f)?d("",!0):(n(),l("div",at,[m.value||v.value?(n(),_(u,{key:0,to:{name:"Batch",params:{batchName:a.batch.data.name}}},{default:b(()=>[i(s(y),{variant:"solid",class:"w-full mt-4"},{default:b(()=>[r("span",null,o(m.value?e.__("Manage Batch"):e.__("Visit Batch")),1)]),_:1})]),_:1},8,["to"])):a.batch.data.paid_batch&&a.batch.data.seats_left>0&&a.batch.data.accept_enrollments?(n(),_(u,{key:1,to:{name:"Billing",params:{type:"batch",name:a.batch.data.name}}},{default:b(()=>[v.value?d("",!0):(n(),_(s(y),{key:0,class:"w-full mt-4",variant:"solid"},{default:b(()=>[r("span",null,o(e.__("Register Now")),1)]),_:1}))]),_:1},8,["to"])):a.batch.data.allow_self_enrollment&&a.batch.data.seats_left&&a.batch.data.accept_enrollments?(n(),_(s(y),{key:2,variant:"solid",class:"w-full mt-2",onClick:h[0]||(h[0]=$=>x())},{default:b(()=>[N(o(e.__("Enroll Now")),1)]),_:1})):d("",!0),m.value?(n(),_(u,{key:3,to:{name:"BatchForm",params:{batchName:a.batch.data.name}}},{default:b(()=>[i(s(y),{class:"w-full mt-2"},{default:b(()=>[r("span",null,o(e.__("Edit")),1)]),_:1})]),_:1},8,["to"])):d("",!0)]))])):d("",!0)}}},et={key:0,class:""},st={class:"sticky top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},nt={class:"m-5 pb-10"},rt={class:"flex justify-between w-full"},ot={class:"md:w-2/3"},ct={class:"text-3xl font-semibold text-ink-gray-9"},lt={class:"my-3 leading-6 text-ink-gray-7"},dt={class:"flex avatar-group overlap"},it=["innerHTML"],ut={class:"hidden md:block"},mt={key:0},ht={class:"flex items-center mt-10"},bt={class:"text-2xl font-semibold"},_t={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-5"},ft={key:0},vt=["innerHTML"],Bt={__name:"BatchDetail",props:{batchName:{type:String,required:!0}},setup(a){T("$user");const p=L(),{brand:g}=P(),f=a,t=B({url:"lms.lms.utils.get_batch_details",cache:["batch",f.batchName],params:{batch:f.batchName},auto:!0,onSuccess:c=>{c||p.push({name:"Batches"})}}),w=B({url:"lms.lms.utils.get_batch_courses",params:{batch:f.batchName},cache:["batchCourses",f.batchName],auto:!0}),x=k(()=>{var v,m;let c=[{label:"Batches",route:{name:"Batches"}}];return c.push({label:(v=t==null?void 0:t.data)==null?void 0:v.title,route:{name:"BatchDetail",params:{batchName:(m=t==null?void 0:t.data)==null?void 0:m.name}}}),c});return R(()=>{var c;return{title:(c=t==null?void 0:t.data)==null?void 0:c.title,icon:g.favicon}}),(c,v)=>{const m=z("router-link");return s(t).data?(n(),l("div",et,[r("header",st,[i(s(I),{items:x.value},null,8,["items"])]),r("div",nt,[r("div",rt,[r("div",ot,[r("div",ct,o(s(t).data.title),1),r("div",lt,o(s(t).data.description),1),r("div",dt,[r("div",{class:H(["h-6 mr-1",{"avatar-group overlap":s(t).data.instructors.length>1}])},[(n(!0),l(D,null,M(s(t).data.instructors,e=>(n(),_(Y,{user:e},null,8,["user"]))),256))],2),i(G,{instructors:s(t).data.instructors},null,8,["instructors"])]),r("div",{class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal mt-10",innerHTML:s(t).data.batch_details},null,8,it)]),r("div",ut,[i(S,{batch:s(t)},null,8,["batch"])])]),i(S,{batch:s(t),class:"md:hidden mt-5"},null,8,["batch"]),s(t).data.courses.length?(n(),l("div",mt,[r("div",ht,[r("div",bt,o(c.__("Courses")),1)]),r("div",_t,[s(t).data.courses?(n(!0),l(D,{key:0},M(s(w).data,e=>(n(),l("div",{key:e.course},[i(m,{to:{name:"CourseDetail",params:{courseName:e.name}}},{default:b(()=>[(n(),_(q,{course:e,key:e.name},null,8,["course"]))]),_:2},1032,["to"])]))),128)):d("",!0)]),s(t).data.batch_details_raw?(n(),l("div",ft,[r("div",{innerHTML:s(t).data.batch_details_raw,class:"batch-description"},null,8,vt)])):d("",!0)])):d("",!0)])])):d("",!0)}}};export{Bt as default};
//# sourceMappingURL=BatchDetail-0HJ8qvbK.js.map
